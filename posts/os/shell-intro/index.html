<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>shell-intro(Shell 编程入门) - xcx</title><meta name="description" content=""><meta property="og:title" content="shell-intro(Shell 编程入门)" />
<meta property="og:description" content="Shell 编程入门 1 走进 Shell 编程的大门 1.1 为什么要学Shell？ 学一个东西，我们大部分情况都是往实用性方向着想。从工作角度来讲，学习 Shell 是为了提高我们自己" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiechaoxin.github.io/posts/os/shell-intro/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-17T17:59:12+00:00" />
<meta property="article:modified_time" content="2022-06-17T17:59:12+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="shell-intro(Shell 编程入门)"/>
<meta name="twitter:description" content="Shell 编程入门 1 走进 Shell 编程的大门 1.1 为什么要学Shell？ 学一个东西，我们大部分情况都是往实用性方向着想。从工作角度来讲，学习 Shell 是为了提高我们自己"/>
<meta name="application-name" content="xcx">
<meta name="apple-mobile-web-app-title" content="xcx"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://xiechaoxin.github.io/posts/os/shell-intro/" /><link rel="prev" href="https://xiechaoxin.github.io/posts/os/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%8E%8B%E9%81%93/" /><link rel="next" href="https://xiechaoxin.github.io/posts/tools/database/screw/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "shell-intro(Shell 编程入门)",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xiechaoxin.github.io\/posts\/os\/shell-intro\/"
        },"genre": "posts","keywords": "OS, linux","wordcount":  5427 ,
        "url": "https:\/\/xiechaoxin.github.io\/posts\/os\/shell-intro\/","datePublished": "2022-06-17T17:59:12+00:00","dateModified": "2022-06-17T17:59:12+00:00","publisher": {
            "@type": "Organization",
            "name": "作者"},"author": {
                "@type": "Person",
                "name": "作者"
            },"description": ""
    }
    </script></head><body data-header-desktop="" data-header-mobile=""><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="xcx">xcx</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="在客户端搜索可能比较慢~" id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="xcx">xcx</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="在客户端搜索可能比较慢~" id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><div class="menu-item"><a href="#" onclick="return false;" class="theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="disable"><div class="single-card" ><h2 class="single-title animated flipInX">shell-intro(Shell 编程入门)</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>作者</a></span>&nbsp;<span class="post-category">出版于  <a href="/categories/os/"><i class="far fa-folder fa-fw"></i>OS</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-06-17">2022-06-17</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 5427 字</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 11 分钟</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>目录</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-走进-shell-编程的大门">1 走进 Shell 编程的大门</a>
      <ul>
        <li><a href="#11-为什么要学shell">1.1 为什么要学Shell？</a></li>
        <li><a href="#12-什么是-shell">1.2 什么是 Shell？</a></li>
        <li><a href="#13-shell-编程的-hello-world">1.3 Shell 编程的 Hello World</a></li>
      </ul>
    </li>
    <li><a href="#2-shell-变量">2 Shell 变量</a>
      <ul>
        <li><a href="#21-shell-编程中的变量介绍">2.1 Shell 编程中的变量介绍</a></li>
      </ul>
    </li>
    <li><a href="#3-shell-字符串入门">3 Shell 字符串入门</a></li>
    <li><a href="#4-shell-字符串常见操作">4 Shell 字符串常见操作</a></li>
    <li><a href="#5-shell-数组">5 Shell 数组</a></li>
    <li><a href="#6-参数传递">6 参数传递</a></li>
    <li><a href="#7-shell-基本运算符">7 Shell 基本运算符</a>
      <ul>
        <li><a href="#71-算数运算符">7.1 算数运算符</a></li>
      </ul>
    </li>
    <li><a href="#8-关系运算符">8 关系运算符</a></li>
    <li><a href="#9-逻辑运算符">9 逻辑运算符</a></li>
    <li><a href="#10-布尔运算符">10 布尔运算符</a>
      <ul>
        <li><a href="#101-字符串运算符">10.1 字符串运算符</a></li>
      </ul>
    </li>
    <li><a href="#11-文件相关运算符">11 文件相关运算符</a></li>
    <li><a href="#12-echo">12 echo</a></li>
    <li><a href="#13-printf">13 printf</a></li>
    <li><a href="#14-test">14 test</a></li>
    <li><a href="#15-shell流程控制">15 shell流程控制</a>
      <ul>
        <li><a href="#151-if-条件语句">15.1 if 条件语句</a></li>
      </ul>
    </li>
    <li><a href="#16-for-循环语句">16 for 循环语句</a></li>
    <li><a href="#17-while-语句">17 while 语句</a></li>
    <li><a href="#18-until-循环">18 until 循环</a></li>
    <li><a href="#19-case--esac">19 case &hellip; esac</a>
      <ul>
        <li><a href="#191-break">19.1 break</a></li>
        <li><a href="#192-continue">19.2 continue</a></li>
      </ul>
    </li>
    <li><a href="#20-shell-函数">20 shell 函数</a>
      <ul>
        <li><a href="#201-不带参数没有返回值的函数">20.1 不带参数没有返回值的函数</a></li>
      </ul>
    </li>
    <li><a href="#21-有返回值的函数">21 有返回值的函数</a></li>
    <li><a href="#22-带参数的函数">22 带参数的函数</a></li>
    <li><a href="#23-shell-输入输出重定向">23 Shell 输入/输出重定向</a></li>
    <li><a href="#24-shell-文件包含">24 Shell 文件包含</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><hr>
<h1 id="shell-编程入门">Shell 编程入门</h1>
<h2 id="1-走进-shell-编程的大门">1 走进 Shell 编程的大门</h2>
<h3 id="11-为什么要学shell">1.1 为什么要学Shell？</h3>
<p>学一个东西，我们大部分情况都是往实用性方向着想。从工作角度来讲，学习 Shell 是为了提高我们自己工作效率，提高产出，让我们在更少的时间完成更多的事情。</p>
<p>很多人会说 Shell 编程属于运维方面的知识了，应该是运维人员来做，我们做后端开发的没必要学。我觉得这种说法大错特错，相比于专门做Linux运维的人员来说，我们对 Shell 编程掌握程度的要求要比他们低，但是shell编程也是我们必须要掌握的！</p>
<p>目前Linux系统下最流行的运维自动化语言就是Shell和Python了。</p>
<p>两者之间，Shell几乎是IT企业必须使用的运维自动化编程语言，特别是在运维工作中的服务监控、业务快速部署、服务启动停止、数据备份及处理、日志分析等环节里，shell是不可缺的。Python 更适合处理复杂的业务逻辑，以及开发复杂的运维软件工具，实现通过web访问等。Shell是一个命令解释器，解释执行用户所输入的命令和程序。一输入命令，就立即回应的交互的对话方式。</p>
<p>另外，了解 shell 编程也是大部分互联网公司招聘后端开发人员的要求。下图是我截取的一些知名互联网公司对于 Shell 编程的要求。</p>
<h3 id="12-什么是-shell">1.2 什么是 Shell？</h3>
<p>简单来说“Shell编程就是对一堆Linux命令的逻辑化处理”。</p>
<p>W3Cschool 上的一篇文章是这样介绍 Shell的，如下图所示。
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./19456505.jpg"
        data-srcset="./19456505.jpg, ./19456505.jpg 1.5x, ./19456505.jpg 2x"
        data-sizes="auto"
        alt="./19456505.jpg"
        title="什么是 Shell？" /></p>
<p>一个工具，用来和 kernel(核心)沟通</p>
<p>Bourne Again SHell (简称 bash)</p>
<h3 id="13-shell-编程的-hello-world">1.3 Shell 编程的 Hello World</h3>
<p>学习任何一门编程语言第一件事就是输出HelloWorld了！下面我会从新建文件到shell代码编写来说下Shell 编程如何输出Hello World。</p>
<p>(1)新建一个文件 helloworld.sh :<code>touch helloworld.sh</code>，扩展名为 sh(sh代表Shell)(扩展名并不影响脚本执行，见名知意就好，如果你用 php 写 shell 脚本，扩展名就用 php 好了)</p>
<p>(2) 使脚本具有执行权限：<code>chmod +x helloworld.sh</code></p>
<p>(3) 使用 vim 命令修改helloworld.sh文件：<code>vim helloworld.sh</code>(vim 文件&mdash;&mdash;&gt;进入文件&mdash;&ndash;&gt;命令模式&mdash;&mdash;&gt;按i进入编辑模式&mdash;&ndash;&gt;编辑文件 &mdash;&mdash;-&gt;按Esc进入底行模式&mdash;&ndash;&gt;输入:wq/q! (输入wq代表写入内容并退出，即保存；输入q!代表强制退出不保存。))</p>
<p>helloworld.sh 内容如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 第一个shell小程序,echo 是linux中的输出命令。</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>  <span class="s2">&#34;helloworld!&#34;</span>
</span></span></code></pre></div><p>shell中 # 符号表示注释。<strong>shell 的第一行比较特殊，一般都会以#!开始来指定使用的 shell 类型。在linux中，除了bash shell以外，还有很多版本的shell， 例如zsh、dash等等&hellip;不过bash shell还是我们使用最多的。</strong></p>
<p>(4) 运行脚本:<code>./helloworld.sh</code> 。(注意，一定要写成 <code>./helloworld.sh</code> ，而不是 <code>helloworld.sh</code> ，运行其它二进制的程序也一样，直接写 <code>helloworld.sh</code> ，linux 系统会去 PATH 里寻找有没有叫 helloworld.sh 的，而只有 /bin, /sbin, /usr/bin，/usr/sbin 等在 PATH 里，你的当前目录通常不在 PATH 里，所以写成 <code>helloworld.sh</code> 是会找不到命令的，要用 <code>./helloworld.sh</code> 告诉系统说，就在当前目录找。)</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./55296212.jpg"
        data-srcset="./55296212.jpg, ./55296212.jpg 1.5x, ./55296212.jpg 2x"
        data-sizes="auto"
        alt="./55296212.jpg"
        title="shell 编程Hello World" /></p>
<h2 id="2-shell-变量">2 Shell 变量</h2>
<h3 id="21-shell-编程中的变量介绍">2.1 Shell 编程中的变量介绍</h3>
<p><strong>Shell编程中一般分为三种变量：</strong></p>
<ol>
<li><strong>我们自己定义的变量(局部变量):</strong> 仅在当前 Shell 实例中有效，其他 Shell 启动的程序不能访问局部变量。</li>
<li><strong>Linux已定义的环境变量</strong>(环境变量， 例如：<code>PATH</code>, <code>HOME</code> 等&hellip;, 这类变量我们可以直接使用)，使用 <code>env</code> 命令可以查看所有的环境变量，而set命令既可以查看环境变量也可以查看自定义变量。</li>
<li><strong>Shell变量</strong> ：Shell变量是由 Shell 程序设置的特殊变量。Shell 变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了 Shell 的正常运行</li>
</ol>
<p><strong>常用的环境变量:</strong></p>
<blockquote>
<p>PATH 决定了shell将到哪些目录中寻找命令或程序
HOME 当前用户主目录
HISTSIZE　历史记录数
LOGNAME 当前用户的登录名
HOSTNAME　指主机的名称
SHELL 当前用户Shell类型
LANGUAGE 　语言相关的环境变量，多语言可以修改此环境变量
MAIL　当前用户的邮件存放目录
PS1　基本提示符，对于root用户是#，对于普通用户是$</p>
</blockquote>
<p><strong>使用 Linux 已定义的环境变量：</strong></p>
<p>比如我们要看当前用户目录可以使用：<code>echo $HOME</code>命令；如果我们要看当前用户Shell类型 可以使用 <code>echo $SHELL</code>命令。可以看出，使用方法非常简单。</p>
<p><strong>使用自己定义的变量：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 自定义变量hello</span>
</span></span><span class="line"><span class="cl"><span class="nv">hello</span><span class="o">=</span><span class="s2">&#34;hello world&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$hello</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span>  <span class="s2">&#34;helloworld!&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">myUrl</span><span class="o">=</span><span class="s2">&#34;https://www.google.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">readonly</span> myUrl
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用 unset 命令可以删除变量</span>
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> myUrl
</span></span></code></pre></div><p><strong>Shell 编程中的变量名的命名的注意事项：</strong></p>
<ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头，但是可以使用下划线(_)开头。</li>
<li>中间不能有空格，可以使用下划线(_)。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字(可用help命令查看保留关键字)。</li>
</ul>
<h2 id="3-shell-字符串入门">3 Shell 字符串入门</h2>
<p>字符串是shell编程中最常用最有用的数据类型(除了数字和字符串，也没啥其它类型好用了)，字符串可以用单引号，也可以用双引号。这点和Java中有所不同。</p>
<p><strong>单引号字符串：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;SnailClimb&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">hello</span><span class="o">=</span><span class="s1">&#39;Hello, I  am &#39;</span><span class="nv">$name</span><span class="s1">&#39;!&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$hello</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 单引号里不可以有变量</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 单引号里不可以出现转义字符</span>
</span></span><span class="line"><span class="cl"><span class="nv">str</span><span class="o">=</span><span class="s1">&#39;this is a string&#39;</span>
</span></span></code></pre></div><p>输出内容：</p>
<pre tabindex="0"><code>Hello, I am SnailClimb!
</code></pre><p><strong>双引号字符串：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;SnailClimb&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">hello</span><span class="o">=</span><span class="s2">&#34;Hello, I  am &#34;</span><span class="nv">$name</span><span class="s2">&#34;!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$hello</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 双引号里可以有变量</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 双引号里可以出现转义字符</span>
</span></span><span class="line"><span class="cl"><span class="nv">greeting</span><span class="o">=</span><span class="s2">&#34;hello, &#34;</span><span class="nv">$your_name</span><span class="s2">&#34; !&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">greeting_1</span><span class="o">=</span><span class="s2">&#34;hello, </span><span class="si">${</span><span class="nv">your_name</span><span class="si">}</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$greeting</span>  <span class="nv">$greeting_1</span>
</span></span></code></pre></div><p>输出内容：</p>
<pre tabindex="0"><code>Hello, I am SnailClimb!
</code></pre><h2 id="4-shell-字符串常见操作">4 Shell 字符串常见操作</h2>
<p><strong>拼接字符串：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;SnailClimb&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用双引号拼接</span>
</span></span><span class="line"><span class="cl"><span class="nv">greeting</span><span class="o">=</span><span class="s2">&#34;hello, &#34;</span><span class="nv">$name</span><span class="s2">&#34; !&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">greeting_1</span><span class="o">=</span><span class="s2">&#34;hello, </span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$greeting</span>  <span class="nv">$greeting_1</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 使用单引号拼接</span>
</span></span><span class="line"><span class="cl"><span class="nv">greeting_2</span><span class="o">=</span><span class="s1">&#39;hello, &#39;</span><span class="nv">$name</span><span class="s1">&#39; !&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">greeting_3</span><span class="o">=</span><span class="s1">&#39;hello, ${name} !&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$greeting_2</span>  <span class="nv">$greeting_3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 查找子字符串</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 查找字符 i 或 o 的位置(哪个字母先出现就计算哪个)：</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>expr index <span class="s2">&#34;</span><span class="nv">$str</span><span class="s2">&#34;</span> io<span class="sb">`</span>
</span></span></code></pre></div><p><strong>获取字符串长度：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 获取字符串长度</span>
</span></span><span class="line"><span class="cl"><span class="nv">name</span><span class="o">=</span><span class="s2">&#34;SnailClimb&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 第一种方式</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${#</span><span class="nv">name</span><span class="si">}</span> <span class="c1">#输出 10</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 第二种方式</span>
</span></span><span class="line"><span class="cl">expr length <span class="s2">&#34;</span><span class="nv">$name</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>输出结果:</p>
<pre tabindex="0"><code>10
10
</code></pre><p>使用 expr 命令时，表达式中的运算符左右必须包含空格，如果不包含空格，将会输出表达式本身:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">expr 5+6    // 直接输出 5+6
</span></span><span class="line"><span class="cl">expr <span class="m">5</span> + <span class="m">6</span>       // 输出 <span class="m">11</span>
</span></span></code></pre></div><p>对于某些运算符，还需要我们使用符号 <code>\</code>进行转义，否则就会提示语法错误。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">expr <span class="m">5</span> * <span class="m">6</span>       // 输出错误
</span></span><span class="line"><span class="cl">expr <span class="m">5</span> <span class="se">\*</span> <span class="m">6</span>      // 输出30
</span></span></code></pre></div><p><strong>截取子字符串:</strong></p>
<p>简单的字符串截取：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 从字符串第 1 个字符开始往后截取 10 个字符</span>
</span></span><span class="line"><span class="cl"><span class="nv">str</span><span class="o">=</span><span class="s2">&#34;SnailClimb is a great man&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">str</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">10</span><span class="si">}</span> <span class="c1">#输出:SnailClimb</span>
</span></span></code></pre></div><p>根据表达式截取：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># author:amau</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">var</span><span class="o">=</span><span class="s2">&#34;https://www.runoob.com/linux/linux-shell-variable.html&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># %表示删除从后匹配, 最短结果</span>
</span></span><span class="line"><span class="cl"><span class="c1"># %%表示删除从后匹配, 最长匹配结果</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 表示删除从头匹配, 最短结果</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 表示删除从头匹配, 最长匹配结果</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 注: *为通配符, 意为匹配任意数量的任意字符</span>
</span></span><span class="line"><span class="cl"><span class="nv">s1</span><span class="o">=</span><span class="si">${</span><span class="nv">var</span><span class="p">%%t*</span><span class="si">}</span> <span class="c1">#h</span>
</span></span><span class="line"><span class="cl"><span class="nv">s2</span><span class="o">=</span><span class="si">${</span><span class="nv">var</span><span class="p">%t*</span><span class="si">}</span>  <span class="c1">#https://www.runoob.com/linux/linux-shell-variable.h</span>
</span></span><span class="line"><span class="cl"><span class="nv">s3</span><span class="o">=</span><span class="si">${</span><span class="nv">var</span><span class="p">%%.*</span><span class="si">}</span> <span class="c1">#http://www</span>
</span></span><span class="line"><span class="cl"><span class="nv">s4</span><span class="o">=</span><span class="si">${</span><span class="nv">var</span><span class="p">#*/</span><span class="si">}</span>  <span class="c1">#/www.runoob.com/linux/linux-shell-variable.html</span>
</span></span><span class="line"><span class="cl"><span class="nv">s5</span><span class="o">=</span><span class="si">${</span><span class="nv">var</span><span class="p">##*/</span><span class="si">}</span> <span class="c1">#linux-shell-variable.html</span>
</span></span></code></pre></div><h2 id="5-shell-数组">5 Shell 数组</h2>
<p>bash支持一维数组(不支持多维数组)，并且没有限定数组的大小。我下面给了大家一个关于数组操作的 Shell 代码示例，通过该示例大家可以知道如何创建数组、获取数组长度、获取/删除特定位置的数组元素、删除整个数组以及遍历数组。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">array</span><span class="o">=(</span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> 5<span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">array_name<span class="o">[</span>0<span class="o">]=</span>value0
</span></span><span class="line"><span class="cl">array_name<span class="o">[</span>1<span class="o">]=</span>value1
</span></span><span class="line"><span class="cl">array_name<span class="o">[</span>n<span class="o">]=</span>valuen
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取数组长度</span>
</span></span><span class="line"><span class="cl"><span class="nv">length</span><span class="o">=</span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 或者</span>
</span></span><span class="line"><span class="cl"><span class="nv">length2</span><span class="o">=</span><span class="si">${#</span><span class="nv">array</span><span class="p">[*]</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 输出数组长度</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$length</span> <span class="c1">#输出：5</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$length2</span> <span class="c1">#输出：5</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 输出数组第三个元素</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">array</span><span class="p">[2]</span><span class="si">}</span> <span class="c1">#输出：3</span>
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> array<span class="o">[</span>1<span class="o">]</span><span class="c1"># 删除下标为1的元素也就是删除第二个元素</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span> <span class="p">;</span><span class="k">done</span> <span class="c1"># 遍历数组，输出： 1 3 4 5</span>
</span></span><span class="line"><span class="cl"><span class="nb">unset</span> array<span class="p">;</span> <span class="c1"># 删除数组中的所有元素</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="si">${</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span> <span class="p">;</span><span class="k">done</span> <span class="c1"># 遍历数组，数组元素为空，没有任何输出内容</span>
</span></span></code></pre></div><p>关联数组</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">declare</span> -A <span class="nv">site</span><span class="o">=([</span><span class="s2">&#34;google&#34;</span><span class="o">]=</span><span class="s2">&#34;www.google.com&#34;</span> <span class="o">[</span><span class="s2">&#34;runoob&#34;</span><span class="o">]=</span><span class="s2">&#34;www.runoob.com&#34;</span> <span class="o">[</span><span class="s2">&#34;taobao&#34;</span><span class="o">]=</span><span class="s2">&#34;www.taobao.com&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">declare</span> -A site
</span></span><span class="line"><span class="cl">site<span class="o">[</span><span class="s2">&#34;google&#34;</span><span class="o">]=</span><span class="s2">&#34;www.google.com&#34;</span>
</span></span><span class="line"><span class="cl">site<span class="o">[</span><span class="s2">&#34;runoob&#34;</span><span class="o">]=</span><span class="s2">&#34;www.runoob.com&#34;</span>
</span></span><span class="line"><span class="cl">site<span class="o">[</span><span class="s2">&#34;taobao&#34;</span><span class="o">]=</span><span class="s2">&#34;www.taobao.com&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;数组的键为: </span><span class="si">${</span><span class="p">!site[*]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;数组的键为: </span><span class="si">${</span><span class="p">!site[@]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;数组的元素为: </span><span class="si">${</span><span class="nv">site</span><span class="p">[*]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;数组的元素为: </span><span class="si">${</span><span class="nv">site</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;数组元素个数为: </span><span class="si">${#</span><span class="nv">my_array</span><span class="p">[*]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;数组元素个数为: </span><span class="si">${#</span><span class="nv">my_array</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span></code></pre></div><h2 id="6-参数传递">6 参数传递</h2>
<p>向脚本传递三个参数，并分别输出，其中 $0 为执行的文件名(包含文件路径)
./test.sh 1 2 3</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Shell 传递参数实例！&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;执行的文件名：</span><span class="nv">$0</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;第一个参数为：</span><span class="nv">$1</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;第二个参数为：</span><span class="nv">$2</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;第三个参数为：</span><span class="nv">$3</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>$* 和 $@ 的区别</p>
<p>相同点：都是引用所有参数。
不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则 &quot; * &quot; 等价于 &ldquo;1 2 3&rdquo;(传递了一个参数)，而 &ldquo;@&rdquo; 等价于 &ldquo;1&rdquo; &ldquo;2&rdquo; &ldquo;3&rdquo;(传递了三个参数)。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;-- \$* 演示 ---&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;-- \$@ 演示 ---&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><h2 id="7-shell-基本运算符">7 Shell 基本运算符</h2>
<blockquote>
<p>说明：图片来自《菜鸟教程》</p>
</blockquote>
<p>Shell 编程支持下面几种运算符</p>
<ul>
<li>算数运算符</li>
<li>关系运算符</li>
<li>布尔运算符</li>
<li>字符串运算符</li>
<li>文件测试运算符</li>
</ul>
<h3 id="71-算数运算符">7.1 算数运算符</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./4937342.jpg"
        data-srcset="./4937342.jpg, ./4937342.jpg 1.5x, ./4937342.jpg 2x"
        data-sizes="auto"
        alt="./4937342.jpg"
        title="算数运算符" /></p>
<p>我以加法运算符做一个简单的示例(注意：不是单引号，是反引号)：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span>3<span class="p">;</span><span class="nv">b</span><span class="o">=</span>3<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">val</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> + <span class="nv">$b</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 输出：Total value : 6</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;Total value : </span><span class="nv">$val</span><span class="s2">&#34;</span>
</span></span></code></pre></div><h2 id="8-关系运算符">8 关系运算符</h2>
<p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./64391380.jpg"
        data-srcset="./64391380.jpg, ./64391380.jpg 1.5x, ./64391380.jpg 2x"
        data-sizes="auto"
        alt="./64391380.jpg"
        title="shell关系运算符" /></p>
<p>通过一个简单的示例演示关系运算符的使用，下面shell程序的作用是当score=100的时候输出A否则输出B。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">score</span><span class="o">=</span>90<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">maxscore</span><span class="o">=</span>100<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$score</span> -eq <span class="nv">$maxscore</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;A&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;B&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>输出结果：</p>
<pre tabindex="0"><code>B
</code></pre><h2 id="9-逻辑运算符">9 逻辑运算符</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./60545848.jpg"
        data-srcset="./60545848.jpg, ./60545848.jpg 1.5x, ./60545848.jpg 2x"
        data-sizes="auto"
        alt="./60545848.jpg"
        title="逻辑运算符" /></p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="k">$((</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="m">0</span><span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 输出：0；逻辑与运算只有相与的两边都是1，与的结果才是1；否则与的结果是0</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span><span class="p">;</span>
</span></span></code></pre></div><h2 id="10-布尔运算符">10 布尔运算符</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./93961425.jpg"
        data-srcset="./93961425.jpg, ./93961425.jpg 1.5x, ./93961425.jpg 2x"
        data-sizes="auto"
        alt="./93961425.jpg"
        title="布尔运算符" /></p>
<p>这里就不做演示了，应该挺简单的。</p>
<h3 id="101-字符串运算符">10.1 字符串运算符</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./309094.jpg"
        data-srcset="./309094.jpg, ./309094.jpg 1.5x, ./309094.jpg 2x"
        data-sizes="auto"
        alt="./309094.jpg"
        title=" 字符串运算符" /></p>
<p>简单示例：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="s2">&#34;abc&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="s2">&#34;efg&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;a 不等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>输出：</p>
<pre tabindex="0"><code>a 不等于 b
</code></pre><h2 id="11-文件相关运算符">11 文件相关运算符</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./60359774.jpg"
        data-srcset="./60359774.jpg, ./60359774.jpg 1.5x, ./60359774.jpg 2x"
        data-sizes="auto"
        alt="./60359774.jpg"
        title="文件相关运算符" /></p>
<p>使用方式很简单，比如我们定义好了一个文件路径 <code>file=&quot;/usr/learnshell/test.sh&quot;</code> 如果我们想判断这个文件是否可读，可以这样 <code>if [ -r $file ]</code> 如果想判断这个文件是否可写，可以这样 <code>-w $file</code>，是不是很简单。</p>
<h2 id="12-echo">12 echo</h2>
<p>显示结果定向至文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;It is a test&#34;</span> &gt; myfile
</span></span></code></pre></div><h2 id="13-printf">13 printf</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;Hello, Shell\n&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">printf</span> <span class="s2">&#34;%-10s %-8s %-4.2f\n&#34;</span> 郭靖 男 66.1234
</span></span></code></pre></div><h2 id="14-test">14 test</h2>
<p>Shell 中的 test 命令用于检查某个条件是否成立，它可以进行数值、字符和文件三个方面的测试。</p>
<p><a href="https://www.runoob.com/linux/linux-shell-test.html" target="_blank" rel="noopener noreffer">https://www.runoob.com/linux/linux-shell-test.html</a></p>
<h2 id="15-shell流程控制">15 shell流程控制</h2>
<h3 id="151-if-条件语句">15.1 if 条件语句</h3>
<p>sh 的流程控制不可为空</p>
<p>简单的 if else-if else 的条件语句示例</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nv">b</span><span class="o">=</span><span class="m">20</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="nv">$a</span> <span class="o">==</span> <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;a 等于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="nv">$a</span> -gt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;a 大于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="nv">$a</span> -lt <span class="nv">$b</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">then</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;a 小于 b&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="s2">&#34;没有符合的条件&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><h2 id="16-for-循环语句">16 for 循环语句</h2>
<p>通过下面三个简单的示例认识 for 循环语句最基本的使用，实际上 for 循环语句的功能比下面你看到的示例展现的要大得多。</p>
<p><strong>输出当前列表中的数据：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">for</span> loop in <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;The value is: </span><span class="nv">$loop</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p><strong>产生 10 个随机数：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in <span class="o">{</span>0..9<span class="o">}</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="nv">$RANDOM</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p><strong>输出1到5:</strong></p>
<p>通常情况下 shell 变量调用需要加 $,但是 for 的 (()) 中不需要,下面来看一个例子：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span>1<span class="p">;</span>i&lt;<span class="o">=</span>5<span class="p">;</span>i++<span class="o">))</span><span class="p">;</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span><span class="p">;</span>
</span></span></code></pre></div><h2 id="17-while-语句">17 while 语句</h2>
<p><strong>基本的 while 循环语句：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="nv">int</span><span class="o">=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span><span class="o">((</span> <span class="nv">$int</span>&lt;<span class="o">=</span><span class="m">5</span> <span class="o">))</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$int</span>
</span></span><span class="line"><span class="cl">    <span class="nb">let</span> <span class="s2">&#34;int++&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p><strong>while循环可用于读取键盘信息：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;按下 &lt;CTRL-D&gt; 退出&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -n <span class="s1">&#39;输入你最喜欢的电影: &#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">read</span> FILM
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;是的！</span><span class="nv">$FILM</span><span class="s2"> 是一个好电影&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>输出内容:</p>
<pre tabindex="0"><code>按下 &lt;CTRL-D&gt; 退出
输入你最喜欢的电影: 变形金刚
是的！变形金刚 是一个好电影
</code></pre><p><strong>无限循环：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">command</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><h2 id="18-until-循环">18 until 循环</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">until</span> <span class="o">[</span> ! <span class="nv">$a</span> -lt <span class="m">10</span> <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">   <span class="nb">echo</span> <span class="nv">$a</span>
</span></span><span class="line"><span class="cl">   <span class="nv">a</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$a</span> + 1<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><h2 id="19-case--esac">19 case &hellip; esac</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;输入 1 到 4 之间的数字:&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;你输入的数字为:&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="nv">$aNum</span> in
</span></span><span class="line"><span class="cl">    1<span class="o">)</span>  <span class="nb">echo</span> <span class="s1">&#39;你选择了 1&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    2<span class="o">)</span>  <span class="nb">echo</span> <span class="s1">&#39;你选择了 2&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    3<span class="o">)</span>  <span class="nb">echo</span> <span class="s1">&#39;你选择了 3&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    4<span class="o">)</span>  <span class="nb">echo</span> <span class="s1">&#39;你选择了 4&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    *<span class="o">)</span>  <span class="nb">echo</span> <span class="s1">&#39;你没有输入 1 到 4 之间的数字&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">;;</span>
</span></span><span class="line"><span class="cl"><span class="k">esac</span>
</span></span></code></pre></div><p>跳出循环</p>
<h3 id="191-break">19.1 break</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> :
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="s2">&#34;输入 1 到 5 之间的数字:&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nv">$aNum</span> in
</span></span><span class="line"><span class="cl">        1<span class="p">|</span>2<span class="p">|</span>3<span class="p">|</span>4<span class="p">|</span>5<span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;你输入的数字为 </span><span class="nv">$aNum</span><span class="s2">!&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        *<span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;你输入的数字不是 1 到 5 之间的! 游戏结束&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="nb">break</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><h3 id="192-continue">19.2 continue</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> :
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> -n <span class="s2">&#34;输入 1 到 5 之间的数字: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nv">$aNum</span> in
</span></span><span class="line"><span class="cl">        1<span class="p">|</span>2<span class="p">|</span>3<span class="p">|</span>4<span class="p">|</span>5<span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;你输入的数字为 </span><span class="nv">$aNum</span><span class="s2">!&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">        *<span class="o">)</span> <span class="nb">echo</span> <span class="s2">&#34;你输入的数字不是 1 到 5 之间的!&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="nb">echo</span> <span class="s2">&#34;游戏结束&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><h2 id="20-shell-函数">20 shell 函数</h2>
<h3 id="201-不带参数没有返回值的函数">20.1 不带参数没有返回值的函数</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl">hello<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;这是我的第一个 shell 函数!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;-----函数开始执行-----&#34;</span>
</span></span><span class="line"><span class="cl">hello
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;-----函数执行完毕-----&#34;</span>
</span></span></code></pre></div><p>输出结果：</p>
<pre tabindex="0"><code>-----函数开始执行-----
这是我的第一个 shell 函数!
-----函数执行完毕-----
</code></pre><h2 id="21-有返回值的函数">21 有返回值的函数</h2>
<p>函数返回值在调用该函数后通过 $? 来获得。</p>
<p><strong>输入两个数字之后相加并返回结果：</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl">funWithReturn<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;输入第一个数字: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> aNum
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;输入第二个数字: &#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">read</span> anotherNum
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;两个数字分别为 </span><span class="nv">$aNum</span><span class="s2"> 和 </span><span class="nv">$anotherNum</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">$((</span><span class="nv">$aNum</span><span class="o">+</span><span class="nv">$anotherNum</span><span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">funWithReturn
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;输入的两个数字之和为 </span><span class="nv">$?</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>输出结果：</p>
<pre tabindex="0"><code>输入第一个数字:
1
输入第二个数字:
2
两个数字分别为 1 和 2 !
输入的两个数字之和为 3
</code></pre><h2 id="22-带参数的函数">22 带参数的函数</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># !/bin/bash</span>
</span></span><span class="line"><span class="cl">funWithParam<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第一个参数为 </span><span class="nv">$1</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第二个参数为 </span><span class="nv">$2</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第十个参数为 </span><span class="nv">$10</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第十个参数为 </span><span class="si">${</span><span class="nv">10</span><span class="si">}</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;第十一个参数为 </span><span class="si">${</span><span class="nv">11</span><span class="si">}</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;参数总数有 </span><span class="nv">$#</span><span class="s2"> 个!&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;作为一个字符串输出所有参数 </span><span class="nv">$*</span><span class="s2"> !&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">funWithParam <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span> <span class="m">9</span> <span class="m">34</span> <span class="m">73</span>
</span></span></code></pre></div><p>输出结果：</p>
<pre tabindex="0"><code>第一个参数为 1 !
第二个参数为 2 !
第十个参数为 10 !
第十个参数为 34 !
第十一个参数为 73 !
参数总数有 11 个!
作为一个字符串输出所有参数 1 2 3 4 5 6 7 8 9 34 73 !
</code></pre><p>参数说明</p>
<pre tabindex="0"><code>$#	传递到脚本或函数的参数个数
$*	以一个单字符串显示所有向脚本传递的参数
$$	脚本运行的当前进程ID号
$!	后台运行的最后一个进程的ID号
$@	与$*相同，但是使用时加引号，并在引号中返回每个参数。
$-	显示Shell使用的当前选项，与set命令功能相同。
$?	显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。
</code></pre><h2 id="23-shell-输入输出重定向">23 Shell 输入/输出重定向</h2>
<pre tabindex="0"><code>command &gt; file	将输出重定向到 file。
command &lt; file	将输入重定向到 file。
command &gt;&gt; file	将输出以追加的方式重定向到 file。
n &gt; file	    将文件描述符为 n 的文件重定向到 file。
n &gt;&gt; file	    将文件描述符为 n 的文件以追加的方式重定向到 file。
n &gt;&amp; m	        将输出文件 m 和 n 合并。
n &lt;&amp; m	        将输入文件 m 和 n 合并。
&lt;&lt; tag	        将开始标记 tag 和结束标记 tag 之间的内容作为输入。
</code></pre><p>Here Document
Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</p>
<p>/dev/null 文件
如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p>
<h2 id="24-shell-文件包含">24 Shell 文件包含</h2>
<p>和其他语言一样，Shell 也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。</p>
<p>被包含的文件不需要可执行权限。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">. filename   <span class="c1"># 注意点号(.)和文件名中间有一空格</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 或</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">source</span> filename
</span></span></code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/os/">OS</a>
                </span><span><a href="/tags/linux/">linux</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>更新于 2022-06-17</span>
            </div><div class="post-info-mod"></div>
        </div></div><div class="post-nav"><a href="/posts/os/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E7%8E%8B%E9%81%93/" class="prev" rel="prev" title="操作系统-王道"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/posts/tools/database/screw/" class="next" rel="next" title="screw">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.112.4">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/"></a></span></div>
</div>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script src="/lib/autocomplete/autocomplete.min.js"></script><script src="/lib/lunr/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.zh.min.js"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script src="/js/theme.min.js"></script></body></html>
