<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>mysql详细笔记5-6章 - xcx</title><meta name="description" content=""><meta property="og:title" content="mysql详细笔记5-6章" />
<meta property="og:description" content="mysq详细笔记 [toc] 第5章 排序与分页 5.1 排序数据 1 排序规则 使用 order by 子句排序 ASC(ascend): 升序 DESC(descend) :降序 order by 子句在select预警的结尾. 1.1 单列排序 SELECT last_name, job_id, department_id, hire_date FROM" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiechaoxin.github.io/posts/database%E6%9C%AA%E5%A4%84%E7%90%86/mysql/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B05-6%E7%AB%A0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-17T17:59:12+00:00" />
<meta property="article:modified_time" content="2022-06-17T17:59:12+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="mysql详细笔记5-6章"/>
<meta name="twitter:description" content="mysq详细笔记 [toc] 第5章 排序与分页 5.1 排序数据 1 排序规则 使用 order by 子句排序 ASC(ascend): 升序 DESC(descend) :降序 order by 子句在select预警的结尾. 1.1 单列排序 SELECT last_name, job_id, department_id, hire_date FROM"/>
<meta name="application-name" content="xcx">
<meta name="apple-mobile-web-app-title" content="xcx"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://xiechaoxin.github.io/posts/database%E6%9C%AA%E5%A4%84%E7%90%86/mysql/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B05-6%E7%AB%A0/" /><link rel="prev" href="https://xiechaoxin.github.io/posts/database%E6%9C%AA%E5%A4%84%E7%90%86/mysql/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B07-8%E7%AB%A0/" /><link rel="next" href="https://xiechaoxin.github.io/posts/database%E6%9C%AA%E5%A4%84%E7%90%86/mysql/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B03-4%E7%AB%A0/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "mysql详细笔记5-6章",
        "inLanguage": "zh-cn",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/xiechaoxin.github.io\/posts\/database%E6%9C%AA%E5%A4%84%E7%90%86\/mysql\/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B05-6%E7%AB%A0\/"
        },"genre": "posts","keywords": "database, mysql","wordcount":  17049 ,
        "url": "https:\/\/xiechaoxin.github.io\/posts\/database%E6%9C%AA%E5%A4%84%E7%90%86\/mysql\/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B05-6%E7%AB%A0\/","datePublished": "2022-06-17T17:59:12+00:00","dateModified": "2022-06-17T17:59:12+00:00","publisher": {
            "@type": "Organization",
            "name": "作者"},"author": {
                "@type": "Person",
                "name": "作者"
            },"description": ""
    }
    </script></head><body data-header-desktop="" data-header-mobile=""><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="xcx">xcx</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="在客户端搜索可能比较慢~" id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="#" onclick="return false;" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="xcx">xcx</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="在客户端搜索可能比较慢~" id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><div class="menu-item"><a href="#" onclick="return false;" class="theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="disable"><div class="single-card" ><h2 class="single-title animated flipInX">mysql详细笔记5-6章</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>作者</a></span>&nbsp;<span class="post-category">出版于  <a href="/categories/database/"><i class="far fa-folder fa-fw"></i>database</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-06-17">2022-06-17</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 17049 字</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 35 分钟</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>目录</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#51-排序数据">5.1 排序数据</a></li>
    <li><a href="#1-排序规则">1 排序规则</a>
      <ul>
        <li><a href="#11-单列排序">1.1 单列排序</a></li>
        <li><a href="#12-多列排序">1.2 多列排序</a></li>
      </ul>
    </li>
    <li><a href="#52-分页">5.2 分页</a>
      <ul>
        <li><a href="#13-背景">1.3 背景</a></li>
        <li><a href="#14-实现规则">1.4 实现规则</a></li>
        <li><a href="#15-扩展">1.5 扩展</a></li>
      </ul>
    </li>
    <li><a href="#2-练习sql">2 练习sql</a></li>
  </ul>

  <ul>
    <li><a href="#61-一个案例引发的多表连接">6.1 一个案例引发的多表连接</a></li>
    <li><a href="#3-案例说明">3 案例说明</a></li>
  </ul>

  <ul>
    <li><a href="#4-笛卡尔积交叉连接的理解">4 笛卡尔积(交叉连接)的理解</a></li>
  </ul>

  <ul>
    <li><a href="#5-案例分析与问题解决">5 案例分析与问题解决</a></li>
  </ul>

  <ul>
    <li><a href="#62-多表查询分类讲解">6.2 多表查询分类讲解</a></li>
    <li><a href="#6-等值连接-vs-非等值连接">6 等值连接 vs 非等值连接</a>
      <ul>
        <li><a href="#61-自连接-vs-非自连接">6.1 自连接 vs 非自连接</a></li>
        <li><a href="#62-内连接-vs-外连接">6.2 内连接 vs 外连接</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#63-sql99语法实现多表查询">6.3 SQL99语法实现多表查询</a></li>
    <li><a href="#7-基本语法">7 基本语法</a>
      <ul>
        <li><a href="#71-内连接inner-join的实现">7.1 内连接(INNER JOIN)的实现</a></li>
        <li><a href="#72-外连接outer-join的实现">7.2 外连接(OUTER JOIN)的实现</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#8-右外连接right-outer-join">8 右外连接(RIGHT OUTER JOIN)</a></li>
  </ul>

  <ul>
    <li><a href="#9-满外连接full-outer-join">9 满外连接(FULL OUTER JOIN)</a></li>
    <li><a href="#64-union的使用">6.4 UNION的使用</a></li>
  </ul>

  <ul>
    <li><a href="#65-7种sql-joins的实现">6.5 7种SQL JOINS的实现</a></li>
    <li><a href="#10-sql实现">10 sql实现</a></li>
  </ul>

  <ul>
    <li><a href="#11-语法格式小结">11 语法格式小结</a></li>
  </ul>

  <ul>
    <li><a href="#66-sql99语法新特性">6.6 SQL99语法新特性</a></li>
    <li><a href="#12-自然连接">12 自然连接</a>
      <ul>
        <li><a href="#121-using连接">12.1 USING连接</a></li>
      </ul>
    </li>
    <li><a href="#67-小结">6.7 小结</a></li>
  </ul>

  <ul>
    <li><a href="#13-练习sql">13 练习sql</a></li>
    <li><a href="#71-函数的理解">7.1 函数的理解</a></li>
    <li><a href="#14-什么是函数">14 什么是函数</a>
      <ul>
        <li><a href="#141-不同dbms函数的差异">14.1 不同DBMS函数的差异</a></li>
        <li><a href="#142-mysql的内置函数及分类">14.2 MySQL的内置函数及分类</a></li>
      </ul>
    </li>
    <li><a href="#72-数值函数">7.2 数值函数</a>
      <ul>
        <li><a href="#143-基本函数">14.3 基本函数</a></li>
        <li><a href="#144-角度与弧度互换函数">14.4 角度与弧度互换函数</a></li>
        <li><a href="#145-三角函数">14.5 三角函数</a></li>
        <li><a href="#146-三角函数">14.6 三角函数</a></li>
        <li><a href="#147-进制间的转换">14.7 进制间的转换</a></li>
      </ul>
    </li>
    <li><a href="#73-字符串函数">7.3 字符串函数</a></li>
    <li><a href="#74-日期和时间函数">7.4 日期和时间函数</a>
      <ul>
        <li><a href="#148-获取日期时间">14.8 获取日期、时间</a></li>
        <li><a href="#149-日期与时间戳的转换">14.9 日期与时间戳的转换</a></li>
        <li><a href="#1410-获取月份星期星期数天数等函数">14.10 获取月份、星期、星期数、天数等函数</a></li>
        <li><a href="#1411-日期的操作函数">14.11 日期的操作函数</a></li>
        <li><a href="#1412-时间和秒钟转换的函数">14.12 时间和秒钟转换的函数</a></li>
        <li><a href="#1413-计算日期和时间的函数">14.13 计算日期和时间的函数</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#15-日期的格式化与解析">15 日期的格式化与解析</a></li>
    <li><a href="#75-流程控制函数">7.5 流程控制函数</a></li>
    <li><a href="#76-流程控制函数">7.6 流程控制函数</a></li>
    <li><a href="#77-mysql信息函数">7.7 MySQL信息函数</a></li>
    <li><a href="#78-其他函数">7.8 其他函数</a></li>
  </ul>

  <ul>
    <li><a href="#16-练习sql">16 练习sql</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h1 id="mysq详细笔记">mysq详细笔记</h1>
<h1 id="第5章-排序与分页">[toc]
第5章 排序与分页</h1>
<h2 id="51-排序数据">5.1 排序数据</h2>
<h2 id="1-排序规则">1 排序规则</h2>
<blockquote>
<ul>
<li>使用 order by 子句排序
<ul>
<li>ASC(ascend): 升序</li>
<li>DESC(descend) :降序</li>
</ul>
</li>
<li>order by 子句在select预警的结尾.</li>
</ul>
</blockquote>
<h3 id="11-单列排序">1.1 单列排序</h3>
<pre><code>	SELECT   last_name, job_id, department_id, hire_date
	FROM     employees
	ORDER BY hire_date ;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./e29a1d4d160942adb82c09dea6d36a73.png"
        data-srcset="./e29a1d4d160942adb82c09dea6d36a73.png, ./e29a1d4d160942adb82c09dea6d36a73.png 1.5x, ./e29a1d4d160942adb82c09dea6d36a73.png 2x"
        data-sizes="auto"
        alt="./e29a1d4d160942adb82c09dea6d36a73.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT   last_name, job_id, department_id, hire_date
FROM     employees
ORDER BY hire_date DESC ;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513202720027.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513202720027.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513202720027.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513202720027.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513202720027.png"
        title="在这里插入图片描述" /></p>
<h3 id="12-多列排序">1.2 多列排序</h3>
<pre><code>SELECT last_name, department_id, salary
FROM   employees
ORDER BY department_id, salary DESC;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513202728599.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513202728599.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513202728599.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513202728599.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513202728599.png"
        title="在这里插入图片描述" /></p>
<blockquote>
<ul>
<li>可以使用不在select列表中的列排序.</li>
<li>在对多列进行排序的时候,首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第一列数据中所有值都是唯一的，将不再对第二列进行排序。</li>
</ul>
</blockquote>
<h2 id="52-分页">5.2 分页</h2>
<h3 id="13-背景">1.3 背景</h3>
<blockquote>
<ul>
<li>背景1：查询返回的记录太多了，查看起来很不方便，怎么样能够实现分页查询呢？</li>
<li>背景2：表里有 4 条数据，我们只想要显示第 2、3 条数据怎么办呢？</li>
</ul>
</blockquote>
<h3 id="14-实现规则">1.4 实现规则</h3>
<blockquote>
<ul>
<li>分页原理
所谓分页显示，就是将数据库中的结果集，一段一段显示出来需要的条件。</li>
<li><strong>MySQL中使用 LIMIT 实现分页</strong></li>
</ul>
</blockquote>
<pre><code>格式：
	LIMIT [位置偏移量,] 行数
</code></pre>
<blockquote>
<p>第一个“位置偏移量”参数指示MySQL从哪一行开始显示，是一个可选参数，如果不指定“位置偏移量”，将会从表中的第一条记录开始(第一条记录的位置偏移量是0，第二条记录的位置偏移量是1，以此类推)；第二个参数“行数”指示返回的记录条数。</p>
</blockquote>
<ul>
<li>
<p>示例</p>
<p>&ndash;前10条记录：
SELECT * FROM 表名 LIMIT 0,10;
或者
SELECT * FROM 表名 LIMIT 10;</p>
<p>&ndash;第11至20条记录：
SELECT * FROM 表名 LIMIT 10,10;</p>
<p>&ndash;第21至30条记录：
SELECT * FROM 表名 LIMIT 20,10;</p>
</li>
</ul>
<blockquote>
<p>MySQL 8.0中可以使用“LIMIT 3 OFFSET 4”，意思是获取从第5条记录开始后面的3条记录，和“LIMIT 4,3;”返回的结果相同。</p>
</blockquote>
<ul>
<li>
<p>分页显式公式：*_(当前页数-1)<em>每页条数，每页条数</em>_</p>
<p>SELECT * FROM table
LIMIT(PageNo - 1)*PageSize,PageSize;</p>
</li>
</ul>
<blockquote>
<p>注意：LIMIT 子句必须放在整个SELECT语句的最后！</p>
</blockquote>
<blockquote>
<p>使用 LIMIT 的好处</p>
<ul>
<li>约束返回结果的数量可以减少数据表的网络传输量，也可以提升查询效率。如果我们知道返回结果只有 1 条，就可以使用LIMIT 1，告诉 SELECT 语句只需要返回一条记录即可。这样的好处就是 SELECT 不需要扫描完整的表，只需要检索到一条符合条件的记录即可返回。</li>
</ul>
</blockquote>
<h3 id="15-扩展">1.5 扩展</h3>
<blockquote>
<p>在不同的 DBMS 中使用的关键字可能不同。在 MySQL、PostgreSQL、MariaDB 和 SQLite 中使用 LIMIT 关键字，而且需要放到 SELECT 语句的最后面。</p>
</blockquote>
<ul>
<li>
<p>如果是 SQL Server 和 Access，需要使用 TOP 关键字，比如：</p>
<p>SELECT TOP 5 name, hp_max FROM heros ORDER BY hp_max DESC</p>
</li>
<li>
<p>如果是 DB2，使用<strong>FETCH FIRST 5 ROWS ONLY</strong>这样的关键字：</p>
<p>SELECT name, hp_max FROM heros ORDER BY hp_max DESC FETCH FIRST 5 ROWS ONLY</p>
</li>
<li>
<p>如果是 Oracle，你需要基于 ROWNUM 来统计行数</p>
<p>SELECT rownum,last_name,salary FROM employees WHERE rownum &lt; 5 ORDER BY salary DESC;</p>
</li>
</ul>
<blockquote>
<p>需要说明的是，这条语句是先取出来前 5 条数据行，然后再按照 hp_max 从高到低的顺序进行排序。但这样产生的结果和上述方法的并不一样。我会在后面讲到子查询，你可以使用如下方式得到与上述方法一直的结果.</p>
</blockquote>
<pre><code>SELECT rownum, last_name,salary
FROM (
    SELECT last_name,salary
    FROM employees
    ORDER BY salary DESC)
WHERE rownum &lt; 10;
</code></pre>
<h2 id="2-练习sql">2 练习sql</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="err">第</span><span class="mi">05</span><span class="err">章</span><span class="n">_</span><span class="err">排序与分页</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">排序</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">如果没有使用排序操作，默认情况下查询返回的数据是按照添加数据的顺序显示的。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">基本使用</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">使用</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="err">对查询到的数据进行排序操作。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">升序：</span><span class="k">ASC</span><span class="w"> </span><span class="p">(</span><span class="n">ascend</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">降序：</span><span class="k">DESC</span><span class="w"> </span><span class="p">(</span><span class="n">descend</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">练习：按照</span><span class="n">salary</span><span class="err">从高到低的顺序显示员工信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">练习：按照</span><span class="n">salary</span><span class="err">从低到高的顺序显示员工信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">ASC</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">salary</span><span class="p">;</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="err">如果在</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="err">后没有显式指名排序的方式的话，则默认按照升序排列。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">我们可以使用列的别名，进行排序</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">annual_sal</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">annual_sal</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">列的别名只能在</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="err">中使用，不能在</span><span class="n">WHERE</span><span class="err">中使用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">如下操作报错！</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">annual_sal</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">annual_sal</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">81600</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">强调格式：</span><span class="k">WHERE</span><span class="w"> </span><span class="err">需要声明在</span><span class="n">FROM</span><span class="err">后，</span><span class="k">ORDER</span><span class="w"> </span><span class="n">BY</span><span class="err">之前。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">70</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">二级排序</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">练习：显示员工信息，按照</span><span class="n">department_id</span><span class="err">的降序排列，</span><span class="n">salary</span><span class="err">的升序排列</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">DESC</span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="k">ASC</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">分页</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">mysql</span><span class="err">使用</span><span class="n">limit</span><span class="err">实现数据的分页显示</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">需求</span><span class="mi">1</span><span class="err">：每页显示</span><span class="mi">20</span><span class="err">条记录，此时显示第</span><span class="mi">1</span><span class="err">页</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">需求</span><span class="mi">2</span><span class="err">：每页显示</span><span class="mi">20</span><span class="err">条记录，此时显示第</span><span class="mi">2</span><span class="err">页</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">需求</span><span class="mi">3</span><span class="err">：每页显示</span><span class="mi">20</span><span class="err">条记录，此时显示第</span><span class="mi">3</span><span class="err">页</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="mi">20</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">需求：每页显示</span><span class="n">pageSize</span><span class="err">条记录，此时显示第</span><span class="n">pageNo</span><span class="err">页：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">公式：</span><span class="k">LIMIT</span><span class="w"> </span><span class="p">(</span><span class="n">pageNo</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pageSize</span><span class="p">,</span><span class="n">pageSize</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">...</span><span class="k">LIMIT</span><span class="w"> </span><span class="err">声明顺序如下：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">LIMIT</span><span class="err">的格式：</span><span class="w"> </span><span class="err">严格来说：</span><span class="k">LIMIT</span><span class="w"> </span><span class="err">位置偏移量</span><span class="p">,</span><span class="err">条目数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">结构</span><span class="s2">&#34;LIMIT 0,条目数&#34;</span><span class="w"> </span><span class="err">等价于</span><span class="w"> </span><span class="s2">&#34;LIMIT 条目数&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">DESC</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">练习：表里有</span><span class="mi">107</span><span class="err">条数据，我们只想要显示第</span><span class="w"> </span><span class="mi">32</span><span class="err">、</span><span class="mi">33</span><span class="w"> </span><span class="err">条数据怎么办呢？</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="mi">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">MySQL8</span><span class="p">.</span><span class="mi">0</span><span class="err">新特性：</span><span class="k">LIMIT</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">OFFSET</span><span class="w"> </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">练习：表里有</span><span class="mi">107</span><span class="err">条数据，我们只想要显示第</span><span class="w"> </span><span class="mi">32</span><span class="err">、</span><span class="mi">33</span><span class="w"> </span><span class="err">条数据怎么办呢？</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">OFFSET</span><span class="w"> </span><span class="mi">31</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">练习：查询员工表中工资最高的员工信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">DESC</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">limit</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="err">可以使用在</span><span class="n">MySQL</span><span class="err">、</span><span class="n">PGSQL</span><span class="err">、</span><span class="n">MariaDB</span><span class="err">、</span><span class="n">SQLite</span><span class="w"> </span><span class="err">等数据库中使用，表示分页。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">不能使用在</span><span class="k">SQL</span><span class="w"> </span><span class="n">Server</span><span class="err">、</span><span class="n">DB2</span><span class="err">、</span><span class="n">Oracle</span><span class="err">！</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="err">第</span><span class="mi">05</span><span class="err">章</span><span class="n">_</span><span class="err">排序与分页的课后练习</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询员工的姓名和部门号和年薪，按年薪降序</span><span class="p">,</span><span class="err">按姓名升序显示</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">department_id</span><span class="p">,</span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">annual_salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">annual_salary</span><span class="w"> </span><span class="k">DESC</span><span class="p">,</span><span class="n">last_name</span><span class="w"> </span><span class="k">ASC</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">选择工资不在</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="err">到</span><span class="w"> </span><span class="mi">17000</span><span class="w"> </span><span class="err">的员工的姓名和工资，按工资降序，显示第</span><span class="mi">21</span><span class="err">到</span><span class="mi">40</span><span class="err">位置的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">17000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="k">DESC</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询邮箱中包含</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="err">的员工信息，并先按邮箱的字节数降序，再按部门号升序</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">email</span><span class="p">,</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%e%&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="n">REGEXP</span><span class="w"> </span><span class="s1">&#39;[e]&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">LENGTH</span><span class="p">(</span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="k">DESC</span><span class="p">,</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><h1 id="第6章-多表查询">第6章 多表查询</h1>
<blockquote>
<p>多表查询，也称为关联查询，指两个或更多个表一起完成查询操作。
前提条件：这些一起查询的表之间是有关系的(一对一、一对多)，它们之间一定是有关联字段，这个关联字段可能建立了外键，也可能没有建立外键。比如：员工表和部门表，这两个表依靠“部门编号”进行关联。</p>
</blockquote>
<h2 id="61-一个案例引发的多表连接">6.1 一个案例引发的多表连接</h2>
<h2 id="3-案例说明">3 案例说明</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513203226462.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513203226462.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513203226462.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513203226462.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513203226462.png"
        title="在这里插入图片描述" />
从多个表中获取数据:
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513203245677.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513203245677.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513203245677.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513203245677.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513203245677.png"
        title="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513203245677.png" /></p>
<h1 id="案例查询员工的姓名及其部门名称">案例：查询员工的姓名及其部门名称</h1>
<pre><code>SELECT last_name, department_name
FROM employees, departments;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./04ad771fcec2426fa2c9f751278b1656.png"
        data-srcset="./04ad771fcec2426fa2c9f751278b1656.png, ./04ad771fcec2426fa2c9f751278b1656.png 1.5x, ./04ad771fcec2426fa2c9f751278b1656.png 2x"
        data-sizes="auto"
        alt="./04ad771fcec2426fa2c9f751278b1656.png"
        title="./04ad771fcec2426fa2c9f751278b1656.png" />
查询结果:</p>
<pre><code>+-----------+----------------------+
| last_name | department_name      |
+-----------+----------------------+
| King      | Administration       |
| King      | Marketing            |
| King      | Purchasing           |
| King      | Human Resources      |
| King      | Shipping             |
| King      | IT                   |
| King      | Public Relations     |
| King      | Sales                |
| King      | Executive            |
| King      | Finance              |
| King      | Accounting           |
| King      | Treasury             |
...
| Gietz     | IT Support           |
| Gietz     | NOC                  |
| Gietz     | IT Helpdesk          |
| Gietz     | Government Sales     |
| Gietz     | Retail Sales         |
| Gietz     | Recruiting           |
| Gietz     | Payroll              |
+-----------+----------------------+
2889 rows in set (0.01 sec)
</code></pre>
<p><strong>分析错误情况：</strong></p>
<pre><code>SELECT COUNT(employee_id) FROM employees;
</code></pre>
<h1 id="输出107行">输出107行</h1>
<pre><code>SELECT COUNT(department_id)FROM departments;
</code></pre>
<h1 id="输出27行">输出27行</h1>
<pre><code>SELECT 107*27 FROM dual;
</code></pre>
<blockquote>
<p>我们把上述多表查询中出现的问题称为：笛卡尔积的错误。</p>
</blockquote>
<h2 id="4-笛卡尔积交叉连接的理解">4 笛卡尔积(交叉连接)的理解</h2>
<blockquote>
<p>笛卡尔乘积是一个数学运算。假设我有两个集合 X 和 Y，那么 X 和 Y 的笛卡尔积就是 X 和 Y 的所有可能组合，也就是第一个对象来自于 X，第二个对象来自于 Y 的所有可能。组合的个数即为两个集合中元素个数的乘积数。</p>
</blockquote>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16.jpeg, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16.jpeg 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16.jpeg 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16.jpeg"
        title="在这里插入图片描述" /></p>
<blockquote>
<p>SQL92中，笛卡尔积也称为交叉连接，英文是 CROSS JOIN。在 SQL99 中也是使用 CROSS JOIN表示交叉连接。它的作用就是可以把任意表进行连接，即使这两张表不相关。在MySQL中如下情况会出现笛卡尔积：</p>
</blockquote>
<h1 id="查询员工姓名和所在部门名称">查询员工姓名和所在部门名称</h1>
<pre><code>SELECT last_name,department_name FROM employees,departments;
SELECT last_name,department_name FROM employees CROSS JOIN departments;
SELECT last_name,department_name FROM employees INNER JOIN departments;
SELECT last_name,department_name FROM employees JOIN departments;
</code></pre>
<h2 id="5-案例分析与问题解决">5 案例分析与问题解决</h2>
<blockquote>
<ul>
<li><strong>笛卡尔积的错误会在下面条件下产生：</strong>
<ul>
<li>省略多个表的连接条件(或关联条件)</li>
<li>连接条件(或关联条件)无效</li>
<li>所有表中的所有行互相连接</li>
</ul>
</li>
<li>为了避免笛卡尔积， <strong>可以在 WHERE 加入有效的连接条件。</strong></li>
<li>加入连接条件后，查询语法：</li>
</ul>
</blockquote>
<pre><code>SELECT	table1.column, table2.column
FROM	table1, table2
WHERE	table1.column1 = table2.column2;  #连接条件
</code></pre>
<ul>
<li>正确写法</li>
</ul>
<h1 id="案例查询员工的姓名及其部门名称-1">案例：查询员工的姓名及其部门名称</h1>
<p>SELECT last_name, department_name
FROM employees, departments
WHERE employees.department_id = departments.department_id;</p>
<ul>
<li><strong>在表中有相同列时，在列名之前加上表名前缀。</strong></li>
</ul>
<h2 id="62-多表查询分类讲解">6.2 多表查询分类讲解</h2>
<h2 id="6-等值连接-vs-非等值连接">6 等值连接 vs 非等值连接</h2>
<ul>
<li>
<p><strong>等值连接</strong>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204202758.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204202758.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204202758.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204202758.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204202758.png"
        title="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204202758.png" /></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">employees</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">departments</span><span class="p">.</span><span class="n">location_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w">  </span><span class="n">employees</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204211902.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204211902.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204211902.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204211902.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204211902.png"
        title="在这里插入图片描述" /></p>
<ul>
<li>** 拓展1：多个连接条件与 AND 操作符 **
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204240774.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204240774.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204240774.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513204240774.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513204240774.png"
        title="在这里插入图片描述" /></li>
<li><strong>拓展2：区分重复的列名</strong></li>
</ul>
<blockquote>
<ul>
<li><strong>多个表中有相同列时，必须在列名之前加上表名前缀。</strong></li>
<li>在不同表中具有相同列名的列可以用表名加以区分。</li>
</ul>
</blockquote>
<pre><code>SELECT employees.last_name, departments.department_name,employees.department_id
FROM employees, departments
WHERE employees.department_id = departments.department_id;
</code></pre>
<ul>
<li><strong>拓展3：表的别名</strong></li>
</ul>
<blockquote>
<ul>
<li>使用别名可以简化查询。</li>
<li>列名前使用表名前缀可以提高查询效率。</li>
</ul>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w">  </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><blockquote>
<p>需要注意的是，如果我们使用了表的别名，在查询字段中、过滤条件中就只能使用别名进行代替，不能使用原有的表名，否则就会报错。</p>
</blockquote>
<blockquote>
<p>阿里开发规范：
【强制】对于数据库中表记录的查询和变更，只要涉及多个表，都需要在列名前加表的别名(或 表名)进行限定。
说明：对多表进行查询记录、更新记录、删除记录时，如果对操作列没有限定表的别名(或表名)，并且操作列在多个表中存在时，就会抛异常。
正例：select t1.name from table_first as t1 , table_second as t2 where t1.id=t2.id;
反例：在某业务中，由于多表关联查询语句没有加表的别名(或表名)的限制，正常运行两年后，最近在 某个表中增加一个同名字段，在预发布环境做数据库变更后，线上查询语句出现出 1052 异常：Column ‘name’ in field list is ambiguous。</p>
</blockquote>
<ul>
<li><strong>拓展4：连接多个表</strong>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205221649.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205221649.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205221649.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205221649.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205221649.png"
        title="在这里插入图片描述" /></li>
</ul>
<blockquote>
<p>**总结：连接 n个表,至少需要n-1个连接条件。**比如，连接三个表，至少需要两个连接条件。</p>
</blockquote>
<ul>
<li>
<p><strong>非等值连接</strong>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205240501.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205240501.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205240501.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205240501.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205240501.png"
        title="在这里插入图片描述" /></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">grade_level</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">job_grades</span><span class="w"> </span><span class="n">j</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w">  </span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">lowest_sal</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="n">highest_sal</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205610634.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205610634.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205610634.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205610634.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205610634.png"
        title="在这里插入图片描述" /></p>
<h3 id="61-自连接-vs-非自连接">6.1 自连接 vs 非自连接</h3>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205745774.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205745774.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205745774.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205745774.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205745774.png"
        title="在这里插入图片描述" /></p>
<blockquote>
<p>当table1和table2本质上是同一张表，只是用取别名的方式虚拟成两张表以代表不同的意义。然后两个表再进行内连接，外连接等查询。</p>
</blockquote>
<p><strong>题目：查询employees表，返回“Xxx works for Xxx”</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="n">worker</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="s1">&#39; works for &#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">,</span><span class="w"> </span><span class="n">manager</span><span class="p">.</span><span class="n">last_name</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">worker</span><span class="p">,</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">manager</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w">  </span><span class="n">worker</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">manager</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205835365.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205835365.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205835365.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205835365.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205835365.png"
        title="在这里插入图片描述" /></p>
<h3 id="62-内连接-vs-外连接">6.2 内连接 vs 外连接</h3>
<p>除了查询满足条件的记录以外，外连接还可以查询某一方不满足条件的记录。
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205845047.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205845047.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205845047.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513205845047.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513205845047.png"
        title="在这里插入图片描述" /></p>
<blockquote>
<ul>
<li>内连接: 合并具有同一列的两个以上的表的行, <strong>结果集中不包含一个表与另一个表不匹配的行</strong></li>
<li>外连接: 两个表在连接过程中除了返回满足连接条件的行以外**还返回左(或右)表中不满足条件的行 ，这种连接称为左(或右) 外连接。**没有匹配的行时, 结果表中相应的列为空(NULL)。</li>
<li>如果是左外连接，则连接条件中左边的表也称为<strong>主表</strong>，右边的表称为<strong>从表。</strong></li>
<li>如果是右外连接，则连接条件中右边的表也称为<strong>主表</strong>，左边的表称为<strong>从表。</strong></li>
</ul>
</blockquote>
<ul>
<li><strong>SQL92：使用(+)创建连接</strong></li>
</ul>
<blockquote>
<ul>
<li>在 SQL92 中采用(+)代表从表所在的位置。即左或右外连接中，(+) 表示哪个是从表。</li>
<li>Oracle 对 SQL92 支持较好，而 MySQL 则不支持 SQL92 的外连接。</li>
</ul>
</blockquote>
<h1 id="左外连接">左外连接</h1>
<pre><code>SELECT last_name,department_name
FROM employees ,departments
WHERE employees.department_id = departments.department_id(+);
</code></pre>
<h1 id="右外连接">右外连接</h1>
<pre><code>SELECT last_name,department_name
FROM employees ,departments
WHERE employees.department_id(+) = departments.department_id;
</code></pre>
<blockquote>
<ul>
<li>而且在 SQL92 中，只有左外连接和右外连接，没有满(或全)外连接。</li>
</ul>
</blockquote>
<h2 id="63-sql99语法实现多表查询">6.3 SQL99语法实现多表查询</h2>
<h2 id="7-基本语法">7 基本语法</h2>
<ul>
<li>
<p>使用JOIN…ON子句创建连接的语法结构：</p>
<p>SELECT table1.column, table2.column,table3.column
FROM table1
JOIN table2 ON table1 和 table2 的连接条件
JOIN table3 ON table2 和 table3 的连接条件</p>
</li>
</ul>
<p>它的嵌套逻辑类似我们使用的 FOR 循环：</p>
<pre><code>for t1 in table1:
    for t2 in table2:
       if condition1:
           for t3 in table3:
              if condition2:
                  output t1 + t2 + t3
</code></pre>
<blockquote>
<p>SQL99 采用的这种嵌套结构非常清爽、层次性更强、可读性更强，即使再多的表进行连接也都清晰可见。如果你采用 SQL92，可读性就会大打折扣。</p>
<ul>
<li>语法说明：
<ul>
<li><strong>可以使用 ON 子句指定额外的连接条件。</strong></li>
<li>这个连接条件是与其它条件分开的。</li>
<li><strong>ON 子句使语句具有更高的易读性。</strong></li>
<li>关键字 JOIN、INNER JOIN、CROSS JOIN 的含义是一样的，都表示内连接</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="71-内连接inner-join的实现">7.1 内连接(INNER JOIN)的实现</h3>
<ul>
<li>
<p>语法：</p>
<p>SELECT 字段列表
FROM A表 INNER JOIN B表
ON 关联条件
WHERE 等其他子句;-</p>
</li>
</ul>
<p>题目1：</p>
<pre><code>SELECT e.employee_id, e.last_name, e.department_id,
       d.department_id, d.location_id
FROM   employees e JOIN departments d
ON     (e.department_id = d.department_id);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./6f86c4868a9d4c20bc5ba75460566ccb.png"
        data-srcset="./6f86c4868a9d4c20bc5ba75460566ccb.png, ./6f86c4868a9d4c20bc5ba75460566ccb.png 1.5x, ./6f86c4868a9d4c20bc5ba75460566ccb.png 2x"
        data-sizes="auto"
        alt="./6f86c4868a9d4c20bc5ba75460566ccb.png"
        title="在这里插入图片描述" />
题目2：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w">   </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w">   </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w">     </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w">   </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w">     </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223312037.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223312037.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223312037.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223312037.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223312037.png"
        title="在这里插入图片描述" /></p>
<h3 id="72-外连接outer-join的实现">7.2 外连接(OUTER JOIN)的实现</h3>
<h4 id="721-左外连接left-outer-join">7.2.1 左外连接(LEFT OUTER JOIN)</h4>
<ul>
<li>语法：</li>
</ul>
<h1 id="实现查询结果是a">实现查询结果是A</h1>
<p>SELECT 字段列表
FROM A表 LEFT JOIN B表
ON 关联条件
WHERE 等其他子句;</p>
<ul>
<li>
<p>举例：</p>
<p>SELECT e.last_name, e.department_id, d.department_name
FROM   employees e
LEFT OUTER JOIN departments d
ON   (e.department_id = d.department_id) ;</p>
</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223843503.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223843503.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223843503.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223843503.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223843503.png"
        title="在这里插入图片描述" /></p>
<h2 id="8-右外连接right-outer-join">8 右外连接(RIGHT OUTER JOIN)</h2>
<ul>
<li>语法：</li>
</ul>
<h1 id="实现查询结果是b">实现查询结果是B</h1>
<p>SELECT 字段列表
FROM A表 RIGHT JOIN B表
ON 关联条件
WHERE 等其他子句;</p>
<ul>
<li>
<p>举例：</p>
<p>SELECT e.last_name, e.department_id, d.department_name
FROM   employees e
RIGHT OUTER JOIN departments d
ON    (e.department_id = d.department_id) ;</p>
</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223838948.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223838948.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223838948.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223838948.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223838948.png"
        title="在这里插入图片描述" /></p>
<blockquote>
<p>需要注意的是，LEFT JOIN 和 RIGHT JOIN 只存在于 SQL99 及以后的标准中，在 SQL92 中不存在，只能用 (+) 表示。</p>
</blockquote>
<h2 id="9-满外连接full-outer-join">9 满外连接(FULL OUTER JOIN)</h2>
<blockquote>
<ul>
<li>满外连接的结果 = 左右表匹配的数据 + 左表没有匹配到的数据 + 右表没有匹配到的数据。</li>
<li>SQL99是支持满外连接的。使用FULL JOIN 或 FULL OUTER JOIN来实现。</li>
<li>需要注意的是，MySQL不支持FULL JOIN，但是可以用 LEFT JOIN UNION RIGHT join代替。</li>
</ul>
</blockquote>
<h2 id="64-union的使用">6.4 UNION的使用</h2>
<blockquote>
<p><strong>合并查询结果</strong>
利用UNION关键字，可以给出多条SELECT语句，并将它们的结果组合成单个结果集。合并时，两个表对应的列数和数据类型必须相同，并且相互对应。各个SELECT语句之间使用UNION或UNION ALL关键字分隔。</p>
</blockquote>
<p>语法格式：</p>
<pre><code>SELECT column,... FROM table1
UNION [ALL]
SELECT column,... FROM table2
</code></pre>
<p><strong>UNION操作符</strong>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_18,color_FFFFFF,t_70,g_se,x_16.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_18%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_18%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_18%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_18,color_FFFFFF,t_70,g_se,x_16.png"
        title="在这里插入图片描述" />
UNION 操作符返回两个查询的结果集的并集，去除重复记录。
<strong>UNION ALL操作符</strong>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_18,color_FFFFFF,t_70,g_se,x_16-20220513223912659.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_18%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223912659.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_18%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223912659.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_18%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223912659.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_18,color_FFFFFF,t_70,g_se,x_16-20220513223912659.png"
        title="在这里插入图片描述" />
UNION ALL操作符返回两个查询的结果集的并集。对于两个结果集的重复部分，不去重。</p>
<blockquote>
<p>注意：执行UNION ALL语句时所需要的资源比UNION语句少。如果明确知道合并数据后的结果数据不存在重复数据，或者不需要去除重复的数据，则尽量使用UNION ALL语句，以提高数据查询的效率。</p>
</blockquote>
<p>举例：查询部门编号&gt;90或邮箱包含a的员工信息</p>
<h1 id="方式1">方式1</h1>
<pre><code>SELECT * FROM employees WHERE email LIKE '%a%' OR department_id&gt;90;
</code></pre>
<h1 id="方式2">方式2</h1>
<pre><code>SELECT * FROM employees  WHERE email LIKE '%a%'
UNION
SELECT * FROM employees  WHERE department_id&gt;90;
</code></pre>
<p>举例：查询中国用户中男性的信息以及美国用户中年男性的用户信息</p>
<pre><code>SELECT id,cname FROM t_chinamale WHERE csex='男'
UNION ALL
SELECT id,tname FROM t_usmale WHERE tGender='male';
</code></pre>
<h2 id="65-7种sql-joins的实现">6.5 7种SQL JOINS的实现</h2>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223927070.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223927070.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223927070.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513223927070.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513223927070.png"
        title="在这里插入图片描述" /></p>
<h2 id="10-sql实现">10 sql实现</h2>
<h1 id="中图内连接-ab">中图：内连接 A∩B</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e JOIN departments d
ON e.`department_id` = d.`department_id`;
</code></pre>
<h1 id="左上图左外连接">左上图：左外连接</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e LEFT JOIN departments d
ON e.`department_id` = d.`department_id`;
</code></pre>
<h1 id="右上图右外连接">右上图：右外连接</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e RIGHT JOIN departments d
ON e.`department_id` = d.`department_id`;
</code></pre>
<h1 id="左中图a---ab">左中图：A - A∩B</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e LEFT JOIN departments d
ON e.`department_id` = d.`department_id`
WHERE d.`department_id` IS NULL
</code></pre>
<h1 id="右中图b-ab">右中图：B-A∩B</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e RIGHT JOIN departments d
ON e.`department_id` = d.`department_id`
WHERE e.`department_id` IS NULL
</code></pre>
<h1 id="左下图满外连接">左下图：满外连接</h1>
<h1 id="左中图--右上图--ab">左中图 + 右上图  A∪B</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e LEFT JOIN departments d
ON e.`department_id` = d.`department_id`
WHERE d.`department_id` IS NULL
UNION ALL  #没有去重操作，效率高
SELECT employee_id,last_name,department_name
FROM employees e RIGHT JOIN departments d
ON e.`department_id` = d.`department_id`;
</code></pre>
<h1 id="右下图">右下图</h1>
<h1 id="左中图--右中图--a-b--ab-或者-a----ab--b---ab">左中图 + 右中图  A ∪B- A∩B 或者 (A -  A∩B) ∪ (B - A∩B)</h1>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e LEFT JOIN departments d
ON e.`department_id` = d.`department_id`
WHERE d.`department_id` IS NULL
UNION ALL
SELECT employee_id,last_name,department_name
FROM employees e RIGHT JOIN departments d
ON e.`department_id` = d.`department_id`
WHERE e.`department_id` IS NULL
</code></pre>
<h2 id="11-语法格式小结">11 语法格式小结</h2>
<ul>
<li>左中图</li>
</ul>
<h1 id="实现a----ab">实现A -  A∩B</h1>
<p>select 字段列表
from A表 left join B表
on 关联条件
where 从表关联字段 is null and 等其他子句;</p>
<ul>
<li>右中图</li>
</ul>
<h1 id="实现b----ab">实现B -  A∩B</h1>
<p>select 字段列表
from A表 right join B表
on 关联条件
where 从表关联字段 is null and 等其他子句;</p>
<ul>
<li>左下图</li>
</ul>
<h1 id="实现查询结果是ab">实现查询结果是A∪B</h1>
<h1 id="用左外的aunion-右外的b">用左外的A，union 右外的B</h1>
<p>select 字段列表
from A表 left join B表
on 关联条件
where 等其他子句</p>
<p>union</p>
<p>select 字段列表
from A表 right join B表
on 关联条件
where 等其他子句;</p>
<ul>
<li>右下图</li>
</ul>
<h1 id="实现ab----ab--或---a----ab--b---ab">实现A∪B -  A∩B  或   (A -  A∩B) ∪ (B - A∩B)</h1>
<h1 id="使用左外的-a----ab--union-右外的b---ab">使用左外的 (A -  A∩B)  union 右外的(B - A∩B)</h1>
<p>select 字段列表
from A表 left join B表
on 关联条件
where 从表关联字段 is null and 等其他子句</p>
<p>union</p>
<p>select 字段列表
from A表 right join B表
on 关联条件
where 从表关联字段 is null and 等其他子句</p>
<h2 id="66-sql99语法新特性">6.6 SQL99语法新特性</h2>
<h2 id="12-自然连接">12 自然连接</h2>
<blockquote>
<p>SQL99 在 SQL92 的基础上提供了一些特殊语法，比如 NATURAL JOIN 用来表示自然连接。我们可以把自然连接理解为 SQL92 中的等值连接。它会帮你自动查询两张连接表中所有相同的字段，然后进行等值连接。
在SQL92标准中：</p>
</blockquote>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e JOIN departments d
ON e.`department_id` = d.`department_id`
AND e.`manager_id` = d.`manager_id`;
</code></pre>
<p>在 SQL99 中你可以写成：</p>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e NATURAL JOIN departments d;
</code></pre>
<h3 id="121-using连接">12.1 USING连接</h3>
<blockquote>
<p>当我们进行连接的时候，SQL99还支持使用 USING 指定数据表里的同名字段进行等值连接。但是只能配合JOIN一起使用。比如：</p>
</blockquote>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e JOIN departments d
USING (department_id);
</code></pre>
<blockquote>
<p>你能看出与自然连接 NATURAL JOIN 不同的是，USING 指定了具体的相同的字段名称，你需要在 USING 的括号 () 中填入要指定的同名字段。同时使用 ==JOIN…USING ==可以简化 JOIN ON 的等值连接。它与下面的 SQL 查询结果是相同的：</p>
</blockquote>
<pre><code>SELECT employee_id,last_name,department_name
FROM employees e ,departments d
WHERE e.department_id = d.department_id;
</code></pre>
<h2 id="67-小结">6.7 小结</h2>
<blockquote>
<p>表连接的约束条件可以有三种方式：WHERE, ON, USING</p>
<ul>
<li>WHERE：适用于所有关联查询</li>
<li>ON：只能和JOIN一起使用，只能写关联条件。虽然关联条件可以并到WHERE中和其他条件一起写，但分开写可读性更好。</li>
<li>USING：只能和JOIN一起使用，而且要求两个关联字段在关联表中名称一致，而且只能表示关联字段值相等</li>
</ul>
</blockquote>
<h1 id="关联条件">关联条件</h1>
<h1 id="把关联条件写在where后面">把关联条件写在where后面</h1>
<pre><code>SELECT last_name,department_name
FROM employees,departments
WHERE employees.department_id = departments.department_id;
</code></pre>
<h1 id="把关联条件写在on后面只能和join一起使用">把关联条件写在on后面，只能和JOIN一起使用</h1>
<pre><code>SELECT last_name,department_name
FROM employees INNER JOIN departments
ON employees.department_id = departments.department_id;

SELECT last_name,department_name
FROM employees CROSS JOIN departments
ON employees.department_id = departments.department_id;

SELECT last_name,department_name
FROM employees JOIN departments
ON employees.department_id = departments.department_id;
</code></pre>
<h1 id="把关联字段写在using中只能和join一起使用">把关联字段写在using()中，只能和JOIN一起使用</h1>
<h1 id="而且两个表中的关联字段必须名称相同而且只能表示">而且两个表中的关联字段必须名称相同，而且只能表示=</h1>
<h1 id="查询员工姓名与基本工资">查询员工姓名与基本工资</h1>
<pre><code>SELECT last_name,job_title
FROM employees INNER JOIN jobs USING(job_id);
</code></pre>
<h1 id="n张表关联需要n-1个关联条件">n张表关联，需要n-1个关联条件</h1>
<h1 id="查询员工姓名基本工资部门名称">查询员工姓名，基本工资，部门名称</h1>
<pre><code>SELECT last_name,job_title,department_name FROM employees,departments,jobs
WHERE employees.department_id = departments.department_id
AND employees.job_id = jobs.job_id;

SELECT last_name,job_title,department_name
FROM employees INNER JOIN departments INNER JOIN jobs
ON employees.department_id = departments.department_id
AND employees.job_id = jobs.job_id;
</code></pre>
<blockquote>
<p><strong>注意：</strong>
我们要控制连接表的数量。多表连接就相当于嵌套 for 循环一样，非常消耗资源，会让 SQL 查询性能下降得很严重，因此不要连接不必要的表。在许多 DBMS 中，也都会有最大连接表的限制。</p>
</blockquote>
<blockquote>
<p>【强制】超过三个表禁止 join。需要 join 的字段，数据类型保持绝对一致；多表关联查询时， 保证被关联的字段需要有索引。
说明：即使双表 join 也要注意表索引、SQL 性能。
来源：阿里巴巴《Java开发手册》</p>
</blockquote>
<p><strong>常用的 SQL 标准有哪些</strong></p>
<blockquote>
<ul>
<li>在正式开始讲连接表的种类时，我们首先需要知道 SQL 存在不同版本的标准规范，因为不同规范下的表连接操作是有区别的。</li>
<li>SQL 有两个主要的标准，分别是== SQL92== 和 SQL99。92 和 99 代表了标准提出的时间，SQL92 就是 92 年提出的标准规范。当然除了 SQL92 和 SQL99 以外，还存在 SQL-86、SQL-89、SQL:2003、SQL:2008、SQL:2011 和 SQL:2016 等其他的标准。</li>
<li>这么多标准，到底该学习哪个呢？==实际上最重要的 SQL 标准就是 SQL92 和 SQL99。==一般来说 SQL92 的形式更简单，但是写的 SQL 语句会比较长，可读性较差。而 SQL99 相比于 SQL92 来说，语法更加复杂，但可读性更强。我们从这两个标准发布的页数也能看出，SQL92 的标准有 500 页，而 SQL99 标准超过了 1000 页。实际上从 SQL99 之后，很少有人能掌握所有内容，因为确实太多了。就好比我们使用 Windows、Linux 和 Office 的时候，很少有人能掌握全部内容一样。我们只需要掌握一些核心的功能，满足日常工作的需求即可。</li>
<li>SQL92 和 SQL99 是经典的 SQL 标准，也分别叫做 SQL-2 和 SQL-3 标准。也正是在这两个标准发布之后，SQL 影响力越来越大，甚至超越了数据库领域。现如今 SQL 已经不仅仅是数据库领域的主流语言，还是信息领域中信息处理的主流语言。在图形检索、图像检索以及语音检索中都能看到 SQL 语言的使用。</li>
</ul>
</blockquote>
<h2 id="13-练习sql">13 练习sql</h2>
<blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="err">第</span><span class="mi">06</span><span class="err">章</span><span class="n">_</span><span class="err">多表查询</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">SELECT ...,....,....
</span></span></span><span class="line"><span class="cl"><span class="cm">FROM ....
</span></span></span><span class="line"><span class="cl"><span class="cm">WHERE .... AND / OR / NOT....
</span></span></span><span class="line"><span class="cl"><span class="cm">ORDER BY .... (ASC/DESC),....,...
</span></span></span><span class="line"><span class="cl"><span class="cm">LIMIT ...,...
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="err">熟悉常见的几个表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">DESC</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">DESC</span><span class="w"> </span><span class="n">departments</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">DESC</span><span class="w"> </span><span class="n">locations</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">查询员工名为</span><span class="s1">&#39;Abel&#39;</span><span class="err">的人在哪个城市工作？</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Abel&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">departments</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">locations</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2500</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">2</span><span class="p">.</span><span class="w"> </span><span class="err">出现笛卡尔积的错误</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">错误的原因：缺少了多表的连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">错误的实现方式：每个员工都与每个部门匹配了一遍。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">,</span><span class="n">departments</span><span class="p">;</span><span class="w">  </span><span class="o">#</span><span class="err">查询出</span><span class="mi">2889</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">错误的方式</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="p">;</span><span class="o">#</span><span class="err">查询出</span><span class="mi">2889</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">  </span><span class="o">#</span><span class="mi">107</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="mi">2889</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">107</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">departments</span><span class="p">;</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="mi">27</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">3</span><span class="p">.</span><span class="w"> </span><span class="err">多表查询的正确方式：需要有连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">,</span><span class="n">departments</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">两个表的连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">4</span><span class="p">.</span><span class="w"> </span><span class="err">如果查询语句中出现了多个表中都存在的字段，则必须指明此字段所在的表。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">departments</span><span class="p">.</span><span class="n">department_name</span><span class="p">,</span><span class="n">employees</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">,</span><span class="n">departments</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">建议：从</span><span class="n">sql</span><span class="err">优化的角度，建议多表查询时，每个字段前都指明其所在的表。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">5</span><span class="p">.</span><span class="w"> </span><span class="err">可以给表起别名，在</span><span class="n">SELECT</span><span class="err">和</span><span class="n">WHERE</span><span class="err">中使用表的别名。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">department_name</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">dept</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dept</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">如果给表起了别名，一旦在</span><span class="n">SELECT</span><span class="err">或</span><span class="n">WHERE</span><span class="err">中使用表名的话，则必须使用表的别名，而不能再使用表的原名。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">如下的操作是错误的：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">departments</span><span class="p">.</span><span class="n">department_name</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">emp</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">dept</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">6</span><span class="p">.</span><span class="w"> </span><span class="err">结论：如果有</span><span class="n">n</span><span class="err">个表实现多表的查询，则需要至少</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="err">个连接条件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">练习：查询员工的</span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="p">,</span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="p">,</span><span class="n">l</span><span class="p">.</span><span class="n">city</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AND</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">演绎式：提出问题1 ---&gt; 解决问题1 ----&gt; 提出问题2 ---&gt; 解决问题2 ....
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">归纳式：总--分
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">7</span><span class="p">.</span><span class="w"> </span><span class="err">多表查询的分类</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">角度1：等值连接  vs  非等值连接
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">角度2：自连接  vs  非自连接
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">角度3：内连接  vs  外连接
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="mi">7</span><span class="p">.</span><span class="mi">1</span><span class="w"> </span><span class="err">等值连接</span><span class="w">  </span><span class="n">vs</span><span class="w">  </span><span class="err">非等值连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">非等值连接的例子：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">job_grades</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="p">,</span><span class="n">j</span><span class="p">.</span><span class="n">grade_level</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">job_grades</span><span class="w"> </span><span class="n">j</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">salary</span><span class="o">`</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="o">`</span><span class="n">lowest_sal</span><span class="o">`</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="o">`</span><span class="n">highest_sal</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">salary</span><span class="o">`</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="o">`</span><span class="n">lowest_sal</span><span class="o">`</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">salary</span><span class="o">`</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">j</span><span class="p">.</span><span class="o">`</span><span class="n">highest_sal</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">7</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="err">自连接</span><span class="w">  </span><span class="n">vs</span><span class="w">  </span><span class="err">非自连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">自连接的例子：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">练习：查询员工</span><span class="n">id</span><span class="p">,</span><span class="err">员工姓名及其管理者的</span><span class="n">id</span><span class="err">和姓名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">mgr</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">mgr</span><span class="p">.</span><span class="n">last_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="p">,</span><span class="n">employees</span><span class="w"> </span><span class="n">mgr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="o">`</span><span class="n">employee_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">7</span><span class="p">.</span><span class="mi">3</span><span class="w"> </span><span class="err">内连接</span><span class="w">  </span><span class="n">vs</span><span class="w">  </span><span class="err">外连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">内连接：合并具有同一列的两个以上的表的行</span><span class="p">,</span><span class="w"> </span><span class="err">结果集中不包含一个表与另一个表不匹配的行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">  </span><span class="o">#</span><span class="err">只有</span><span class="mi">106</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">外连接：合并具有同一列的两个以上的表的行</span><span class="p">,</span><span class="w"> </span><span class="err">结果集中除了包含一个表与另一个表匹配的行之外，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w">         </span><span class="err">还查询到了左表</span><span class="w"> </span><span class="err">或</span><span class="w"> </span><span class="err">右表中不匹配的行。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">外连接的分类：左外连接、右外连接、满外连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">左外连接：两个表在连接过程中除了返回满足连接条件的行以外还返回左表中不满足条件的行，这种连接称为左外连接。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">右外连接：两个表在连接过程中除了返回满足连接条件的行以外还返回右表中不满足条件的行，这种连接称为右外连接。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">练习：查询所有的员工的</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="err">信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">   </span><span class="o">#</span><span class="w"> </span><span class="err">需要使用左外连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="n">SQL92</span><span class="err">语法实现内连接：见上，略</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="n">SQL92</span><span class="err">语法实现外连接：使用</span><span class="w"> </span><span class="o">+</span><span class="w">  </span><span class="c1">----------MySQL不支持SQL92语法中外连接的写法！
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">#</span><span class="err">不支持：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">(</span><span class="o">+</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="n">SQL99</span><span class="err">语法中使用</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="p">...</span><span class="k">ON</span><span class="w"> </span><span class="err">的方式实现多表的查询。这种方式也能解决外连接的问题。</span><span class="n">MySQL</span><span class="err">是支持此种方式的。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="n">SQL99</span><span class="err">语法如何实现多表的查询。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="n">SQL99</span><span class="err">语法实现内连接：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="p">,</span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="n">SQL99</span><span class="err">语法实现外连接：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">练习：查询所有的员工的</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="err">信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">左外连接：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">右外连接：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">满外连接：</span><span class="n">mysql</span><span class="err">不支持</span><span class="k">FULL</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">FULL</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">8</span><span class="p">.</span><span class="w"> </span><span class="k">UNION</span><span class="w">  </span><span class="err">和</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="n">ALL</span><span class="err">的使用</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">UNION</span><span class="err">：会执行去重操作</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="p">:</span><span class="err">不会执行去重操作</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">结论：如果明确知道合并数据后的结果数据不存在重复数据，或者不需要去除重复的数据，</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">则尽量使用</span><span class="k">UNION</span><span class="w"> </span><span class="n">ALL</span><span class="err">语句，以提高数据查询的效率。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">9</span><span class="p">.</span><span class="w"> </span><span class="mi">7</span><span class="err">种</span><span class="n">JOIN</span><span class="err">的实现：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">中图：内连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">左上图：左外连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">右上图：右外连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">左中图：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">右中图：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">左下图：满外连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">方式</span><span class="mi">1</span><span class="err">：左上图</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="err">右中图</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">方式</span><span class="mi">2</span><span class="err">：左中图</span><span class="w"> </span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="err">右上图</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">右下图：左中图</span><span class="w">  </span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="err">右中图</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">10</span><span class="p">.</span><span class="w"> </span><span class="n">SQL99</span><span class="err">语法的新特性</span><span class="mi">1</span><span class="p">:</span><span class="err">自然连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AND</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="err">它会帮你自动查询两张连接表中</span><span class="o">`</span><span class="err">所有相同的字段</span><span class="o">`</span><span class="err">，然后进行</span><span class="o">`</span><span class="err">等值连接</span><span class="o">`</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="mi">11</span><span class="p">.</span><span class="w"> </span><span class="n">SQL99</span><span class="err">语法的新特性</span><span class="mi">2</span><span class="p">:</span><span class="k">USING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">department_id</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">拓展：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">job_title</span><span class="p">,</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">jobs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AND</span><span class="w"> </span><span class="n">employees</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jobs</span><span class="p">.</span><span class="n">job_id</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div></blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">第</span><span class="mi">06</span><span class="err">章</span><span class="n">_</span><span class="err">多表查询的课后练习</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">显示所有员工的姓名，部门号和部门名称。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询</span><span class="mi">90</span><span class="err">号部门员工的</span><span class="n">job_id</span><span class="err">和</span><span class="mi">90</span><span class="err">号部门的</span><span class="n">location_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">90</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">DESC</span><span class="w"> </span><span class="n">departments</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">选择所有有奖金的员工的</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">location_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">commission_pct</span><span class="o">`</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">location_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">commission_pct</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w"> </span><span class="o">#</span><span class="err">也应该是</span><span class="mi">35</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">commission_pct</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w"> </span><span class="o">#</span><span class="mi">35</span><span class="err">条记录</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">选择</span><span class="n">city</span><span class="err">在</span><span class="n">Toronto</span><span class="err">工作的员工的</span><span class="w"> </span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">city</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Toronto&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">sql92</span><span class="err">语法：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="p">,</span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AND</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AND</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">city</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Toronto&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询员工所在的部门名称、部门地址、姓名、工作、工资，其中员工所在部门的部门名称为’</span><span class="n">Executive</span><span class="err">’</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span><span class="p">,</span><span class="n">l</span><span class="p">.</span><span class="n">street_address</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">job_id</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_name</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Executive&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">DESC</span><span class="w"> </span><span class="n">departments</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">DESC</span><span class="w"> </span><span class="n">locations</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">选择指定员工的姓名，员工号，以及他的管理者的姓名和员工号，结果类似于下面的格式</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">employees</span><span class="w">	</span><span class="n">Emp</span><span class="o">#</span><span class="w">	</span><span class="n">manager</span><span class="w">	</span><span class="n">Mgr</span><span class="o">#</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">kochhar</span><span class="w">		</span><span class="mi">101</span><span class="w">	</span><span class="n">king</span><span class="w">	</span><span class="mi">100</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="s2">&#34;employees&#34;</span><span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="s2">&#34;Emp#&#34;</span><span class="p">,</span><span class="n">mgr</span><span class="p">.</span><span class="n">last_name</span><span class="w"> </span><span class="s2">&#34;manager&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">employee_id</span><span class="w"> </span><span class="s2">&#34;Mgr#&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">mgr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="n">manager_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">employee_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询哪些部门没有员工</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">本题也可以使用子查询：暂时不讲</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询哪个城市没有部门</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="n">location_id</span><span class="p">,</span><span class="n">l</span><span class="p">.</span><span class="n">city</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">l</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">location_id</span><span class="o">`</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">departments</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1100</span><span class="p">,</span><span class="mi">1200</span><span class="p">,</span><span class="mi">1300</span><span class="p">,</span><span class="mi">1600</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">查询部门名为</span><span class="w"> </span><span class="n">Sales</span><span class="w"> </span><span class="err">或</span><span class="w"> </span><span class="n">IT</span><span class="w"> </span><span class="err">的员工信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">employee_id</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departments</span><span class="w"> </span><span class="n">d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_id</span><span class="o">`</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="o">`</span><span class="n">department_name</span><span class="o">`</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span><span class="s1">&#39;IT&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><p>========</p>
<h2 id="71-函数的理解">7.1 函数的理解</h2>
<h2 id="14-什么是函数">14 什么是函数</h2>
<blockquote>
<p>函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既提高了代码效率，又提高了可维护性。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地提高用户对数据库的管理效率。</p>
</blockquote>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513230738229.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513230738229.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513230738229.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513230738229.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513230738229.png"
        title="在这里插入图片描述" /></p>
<blockquote>
<p>从函数定义的角度出发，我们可以将函数分成内置函数和自定义函数。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。</p>
</blockquote>
<h3 id="141-不同dbms函数的差异">14.1 不同DBMS函数的差异</h3>
<blockquote>
<p>我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用(||)或者(+)来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。</p>
</blockquote>
<h3 id="142-mysql的内置函数及分类">14.2 MySQL的内置函数及分类</h3>
<blockquote>
<ul>
<li>MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。</li>
<li>MySQL提供的内置函数从实现的功能角度可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：单行函数、聚合函数(或分组函数)。</li>
</ul>
</blockquote>
<p><strong>两种SQL函数</strong>
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513230749303.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513230749303.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513230749303.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-20220513230749303.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-20220513230749303.png"
        title="在这里插入图片描述" />
<strong>单行函数</strong></p>
<blockquote>
<ul>
<li>操作数据对象</li>
<li>接受参数返回一个结果</li>
<li>只对一行进行变换</li>
<li>每行返回一个结果</li>
<li>可以嵌套</li>
<li>参数可以是一列或一个值</li>
</ul>
</blockquote>
<h2 id="72-数值函数">7.2 数值函数</h2>
<h3 id="143-基本函数">14.3 基本函数</h3>
<p>函数</p>
<p>用法</p>
<p>ABS(x)</p>
<p>返回x的绝对值</p>
<p>SIGN(X)</p>
<p>返回X的符号。正数返回1，负数返回-1，0返回0</p>
<p>PI()</p>
<p>返回圆周率的值</p>
<p>CEIL(x)，CEILING(x)</p>
<p>返回大于或等于某个值的最小整数</p>
<p>FLOOR(x)</p>
<p>返回小于或等于某个值的最大整数</p>
<p>LEAST(e1,e2,e3…)</p>
<p>返回列表中的最小值</p>
<p>GREATEST(e1,e2,e3…)</p>
<p>返回列表中的最大值</p>
<p>MOD(x,y)</p>
<p>返回X除以Y后的余数</p>
<p>RAND()</p>
<p>返回0~1的随机值</p>
<p>RAND(x)</p>
<p>返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数</p>
<p>ROUND(x)</p>
<p>返回一个对x的值进行四舍五入后，最接近于X的整数</p>
<p>ROUND(x,y)</p>
<p>返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位</p>
<p>TRUNCATE(x,y)</p>
<p>返回数字x截断为y位小数的结果</p>
<p>SQRT(x)</p>
<p>返回x的平方根。当X的值为负数时，返回NULL</p>
<p><strong>举例</strong></p>
<pre><code>SELECT ABS(-123),ABS(123),SIGN(-23),SIGN(23),PI(),CEIL(32.32),
	   CEILING(-43.23),FLOOR(32.32),FLOOR(-43.23),MOD(12,5)
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./08c49659f63b458392ad8ce7a055bd97.png"
        data-srcset="./08c49659f63b458392ad8ce7a055bd97.png, ./08c49659f63b458392ad8ce7a055bd97.png 1.5x, ./08c49659f63b458392ad8ce7a055bd97.png 2x"
        data-sizes="auto"
        alt="./08c49659f63b458392ad8ce7a055bd97.png"
        title="./08c49659f63b458392ad8ce7a055bd97.png" /></p>
<pre><code>SELECT RAND(),RAND(),RAND(10),RAND(10),RAND(-1),RAND(-1)
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./01bf91a97c6e463b810a2d7adc430078.png"
        data-srcset="./01bf91a97c6e463b810a2d7adc430078.png, ./01bf91a97c6e463b810a2d7adc430078.png 1.5x, ./01bf91a97c6e463b810a2d7adc430078.png 2x"
        data-sizes="auto"
        alt="./01bf91a97c6e463b810a2d7adc430078.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT ROUND(12.33),ROUND(12.343,2),ROUND(12.324,-1),TRUNCATE(12.66,1),TRUNCATE(12.66,-1)
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./361d1584fae046fc9fdf013110062368.png"
        data-srcset="./361d1584fae046fc9fdf013110062368.png, ./361d1584fae046fc9fdf013110062368.png 1.5x, ./361d1584fae046fc9fdf013110062368.png 2x"
        data-sizes="auto"
        alt="./361d1584fae046fc9fdf013110062368.png"
        title="在这里插入图片描述" /></p>
<h3 id="144-角度与弧度互换函数">14.4 角度与弧度互换函数</h3>
<p>函数</p>
<p>用法</p>
<p>RADIANS(x)</p>
<p>将角度转化为弧度，其中，参数x为角度值</p>
<p>DEGREES(x)</p>
<p>将弧度转化为角度，其中，参数x为弧度值</p>
<pre><code>SELECT RADIANS(30),RADIANS(60),RADIANS(90),DEGREES(2*PI()),DEGREES(RADIANS(90))
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./8b76f7d24c6a4689bc0627143ca6e539.png"
        data-srcset="./8b76f7d24c6a4689bc0627143ca6e539.png, ./8b76f7d24c6a4689bc0627143ca6e539.png 1.5x, ./8b76f7d24c6a4689bc0627143ca6e539.png 2x"
        data-sizes="auto"
        alt="./8b76f7d24c6a4689bc0627143ca6e539.png"
        title="在这里插入图片描述" /></p>
<h3 id="145-三角函数">14.5 三角函数</h3>
<p>函数</p>
<p>用法</p>
<p>SIN(x)</p>
<p>返回x的正弦值，其中，参数x为弧度值</p>
<p>ASIN(x)</p>
<p>返回x的反正弦值，即获取正弦为x的值。如果x的值不在-1到1之间，则返回NULL</p>
<p>COS(x)</p>
<p>返回x的余弦值，其中，参数x为弧度值</p>
<p>ACOS(x)</p>
<p>返回x的反余弦值，即获取余弦为x的值。如果x的值不在-1到1之间，则返回NULL</p>
<p>TAN(x)</p>
<p>返回x的正切值，其中，参数x为弧度值</p>
<p>ATAN(x)</p>
<p>返回x的反正切值，即返回正切值为x的值</p>
<p>ATAN2(m,n)</p>
<p>返回两个参数的反正切值</p>
<p>COT(x)</p>
<p>返回x的余切值，其中，X为弧度值</p>
<p><strong>举例</strong></p>
<blockquote>
<p>ATAN2(M,N)函数返回两个参数的反正切值。
与ATAN(X)函数相比，ATAN2(M,N)需要两个参数，例如有两个点point(x1,y1)和point(x2,y2)，使用ATAN(X)函数计算反正切值为ATAN((y2-y1)/(x2-x1))，使用ATAN2(M,N)计算反正切值则为ATAN2(y2-y1,x2-x1)。由使用方式可以看出，当x2-x1等于0时，ATAN(X)函数会报错，而ATAN2(M,N)函数则仍然可以计算。</p>
</blockquote>
<p>ATAN2(M,N)函数的使用示例如下：</p>
<pre><code>SELECT SIN(RADIANS(30)),DEGREES(ASIN(1)),TAN(RADIANS(45)),DEGREES(ATAN(1)),DEGREES(ATAN2(1,1))
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./b2d0810e112845539144294e9817bd2b.png"
        data-srcset="./b2d0810e112845539144294e9817bd2b.png, ./b2d0810e112845539144294e9817bd2b.png 1.5x, ./b2d0810e112845539144294e9817bd2b.png 2x"
        data-sizes="auto"
        alt="./b2d0810e112845539144294e9817bd2b.png"
        title="在这里插入图片描述" /></p>
<h3 id="146-三角函数">14.6 三角函数</h3>
<p>函数</p>
<p>用法</p>
<p>POW(x,y)，</p>
<p>POWER(X,Y) 返回x的y次方</p>
<p>EXP(X)</p>
<p>返回e的X次方，其中e是一个常数，2.718281828459045</p>
<p>LN(X)，LOG(X)</p>
<p>返回以e为底的X的对数，当X &lt;= 0 时，返回的结果为NULL</p>
<p>LOG10(X)</p>
<p>返回以10为底的X的对数，当X &lt;= 0 时，返回的结果为NULL</p>
<p>LOG2(X)</p>
<p>返回以2为底的X的对数，当X &lt;= 0 时，返回NULL</p>
<pre><code>SELECT POW(2,5),POWER(2,4),EXP(2),LN(10),LOG10(10),LOG2(4)
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./bceb5080226a4cb9934a042f90b2e2f4.png"
        data-srcset="./bceb5080226a4cb9934a042f90b2e2f4.png, ./bceb5080226a4cb9934a042f90b2e2f4.png 1.5x, ./bceb5080226a4cb9934a042f90b2e2f4.png 2x"
        data-sizes="auto"
        alt="./bceb5080226a4cb9934a042f90b2e2f4.png"
        title="在这里插入图片描述" /></p>
<h3 id="147-进制间的转换">14.7 进制间的转换</h3>
<p>函数</p>
<p>用法</p>
<p>BIN(x)</p>
<p>返回x的二进制编码</p>
<p>HEX(x)</p>
<p>返回x的十六进制编码</p>
<p>OCT(x)</p>
<p>返回x的八进制编码</p>
<p>CONV(x,f1,f2)</p>
<p>返回f1进制数变成f2进制数</p>
<pre><code>SELECT BIN(10),HEX(10),OCT(10),CONV(10,2,8)
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./7f2824169dad4332b899615c9a64cdfa.png"
        data-srcset="./7f2824169dad4332b899615c9a64cdfa.png, ./7f2824169dad4332b899615c9a64cdfa.png 1.5x, ./7f2824169dad4332b899615c9a64cdfa.png 2x"
        data-sizes="auto"
        alt="./7f2824169dad4332b899615c9a64cdfa.png"
        title="在这里插入图片描述" /></p>
<h2 id="73-字符串函数">7.3 字符串函数</h2>
<p>函数</p>
<p>用法</p>
<p>ASCII(S)</p>
<p>返回字符串S中的第一个字符的ASCII码值</p>
<p>CHAR_LENGTH(s)</p>
<p>返回字符串s的字符数。作用与CHARACTER_LENGTH(s)相同</p>
<p>LENGTH(s)</p>
<p>返回字符串s的字节数，和字符集有关</p>
<p>CONCAT(s1,s2,…,sn)</p>
<p>连接s1,s2,…,sn为一个字符串</p>
<p>CONCAT_WS(x, s1,s2,…,sn)</p>
<p>同CONCAT(s1,s2,…)函数，但是每个字符串之间要加上x</p>
<p>INSERT(str, idx, len, replacestr)</p>
<p>将字符串str从第idx位置开始，len个字符长的子串替换为字符串replacestr</p>
<p>REPLACE(str, a, b)</p>
<p>用字符串b替换字符串str中所有出现的字符串a</p>
<p>UPPER(s) 或 UCASE(s)</p>
<p>将字符串s的所有字母转成大写字母</p>
<p>LOWER(s) 或LCASE(s)</p>
<p>将字符串s的所有字母转成小写字母</p>
<p>LEFT(str,n)</p>
<p>返回字符串str最左边的n个字符</p>
<p>RIGHT(str,n)</p>
<p>返回字符串str最右边的n个字符</p>
<p>LPAD(str, len, pad)</p>
<p>用字符串pad对str最左边进行填充，直到str的长度为len个字符</p>
<p>RPAD(str ,len, pad)</p>
<p>用字符串pad对str最右边进行填充，直到str的长度为len个字符</p>
<p>LTRIM(s)</p>
<p>去掉字符串s左侧的空格</p>
<p>RTRIM(s)</p>
<p>去掉字符串s右侧的空格</p>
<p>TRIM(s)</p>
<p>去掉字符串s开始与结尾的空格</p>
<p>TRIM(s1 FROM s)</p>
<p>去掉字符串s开始与结尾的s1</p>
<p>TRIM(LEADING s1 FROM s)</p>
<p>去掉字符串s开始处的s1</p>
<p>TRIM(TRAILING s1 FROM s)</p>
<p>去掉字符串s结尾处的s1</p>
<p>REPEAT(str, n)</p>
<p>返回str重复n次的结果</p>
<p>SPACE(n)</p>
<p>返回n个空格</p>
<p>STRCMP(s1,s2)</p>
<p>比较字符串s1,s2的ASCII码值的大小</p>
<p>SUBSTR(s,index,len)</p>
<p>返回从字符串s的index位置其len个字符，作用与SUBSTRING(s,n,len)、MID(s,n,len)相同</p>
<p>LOCATE(substr,str)</p>
<p>返回字符串substr在字符串str中首次出现的位置，作用于POSITION(substr IN str)、INSTR(str,substr)相同。未找到，返回0</p>
<p>ELT(m,s1,s2,…,sn)</p>
<p>返回指定位置的字符串，如果m=1，则返回s1，如果m=2，则返回s2，如果m=n，则返回sn</p>
<p>FIELD(s,s1,s2,…,sn)</p>
<p>返回字符串s在字符串列表中第一次出现的位置</p>
<p>FIND_IN_SET(s1,s2)</p>
<p>返回字符串s1在字符串s2中出现的位置。其中，字符串s2是一个以逗号分隔的字符串</p>
<p>REVERSE(s)</p>
<p>返回s反转后的字符串</p>
<p>NULLIF(value1,value2)</p>
<p>比较两个字符串，如果value1与value2相等，则返回NULL，否则返回value1</p>
<blockquote>
<p>注意：MySQL中，字符串的位置是从1开始的。</p>
</blockquote>
<pre><code>SELECT FIELD('mm','hello','msm','amma'),FIND_IN_SET('mm','hello,mm,amma')
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./618610f74f5f4331ba249d8031de19b0.png"
        data-srcset="./618610f74f5f4331ba249d8031de19b0.png, ./618610f74f5f4331ba249d8031de19b0.png 1.5x, ./618610f74f5f4331ba249d8031de19b0.png 2x"
        data-sizes="auto"
        alt="./618610f74f5f4331ba249d8031de19b0.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT NULLIF('mysql','mysql'),NULLIF('mysql', '');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./eb150d95799c4f158362cda2a193197a.png"
        data-srcset="./eb150d95799c4f158362cda2a193197a.png, ./eb150d95799c4f158362cda2a193197a.png 1.5x, ./eb150d95799c4f158362cda2a193197a.png 2x"
        data-sizes="auto"
        alt="./eb150d95799c4f158362cda2a193197a.png"
        title="在这里插入图片描述" /></p>
<h2 id="74-日期和时间函数">7.4 日期和时间函数</h2>
<h3 id="148-获取日期时间">14.8 获取日期、时间</h3>
<p>函数</p>
<p>用法</p>
<p>CURDATE() ，CURRENT_DATE()</p>
<p>返回当前日期，只包含年、月、日</p>
<p>CURTIME() ， CURRENT_TIME()</p>
<p>返回当前时间，只包含时、分、秒</p>
<p>NOW() / SYSDATE() / CURRENT_TIMESTAMP() / LOCALTIME() / LOCALTIMESTAMP()</p>
<p>返回当前系统日期和时间</p>
<p>UTC_DATE()</p>
<p>返回UTC(世界标准时间)日期</p>
<p>UTC_TIME()</p>
<p>返回UTC(世界标准时间)时间</p>
<pre><code>SELECT CURDATE(),CURTIME(),NOW(),SYSDATE()+0,UTC_DATE(),UTC_DATE()+0,UTC_TIME(),UTC_TIME()+0
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./a2edbd532dc74f5cb01c8bb3bf767a93.png"
        data-srcset="./a2edbd532dc74f5cb01c8bb3bf767a93.png, ./a2edbd532dc74f5cb01c8bb3bf767a93.png 1.5x, ./a2edbd532dc74f5cb01c8bb3bf767a93.png 2x"
        data-sizes="auto"
        alt="./a2edbd532dc74f5cb01c8bb3bf767a93.png"
        title="在这里插入图片描述" /></p>
<h3 id="149-日期与时间戳的转换">14.9 日期与时间戳的转换</h3>
<p>函数</p>
<p>用法</p>
<p>UNIX_TIMESTAMP()</p>
<p>以UNIX时间戳的形式返回当前时间。SELECT UNIX_TIMESTAMP() -&gt;1634348884</p>
<p>UNIX_TIMESTAMP(date)</p>
<p>将时间date以UNIX时间戳的形式返回。</p>
<p>FROM_UNIXTIME(timestamp)</p>
<p>将UNIX时间戳的时间转换为普通格式的时间</p>
<p><strong>举例</strong></p>
<pre><code>SELECT UNIX_TIMESTAMP(NOW());
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./8df87645a3fb463cb593aa3f4aef90d7.png"
        data-srcset="./8df87645a3fb463cb593aa3f4aef90d7.png, ./8df87645a3fb463cb593aa3f4aef90d7.png 1.5x, ./8df87645a3fb463cb593aa3f4aef90d7.png 2x"
        data-sizes="auto"
        alt="./8df87645a3fb463cb593aa3f4aef90d7.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT UNIX_TIMESTAMP(CURDATE());
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./a3914ebab4ed4f2f9e8429780001940d.png"
        data-srcset="./a3914ebab4ed4f2f9e8429780001940d.png, ./a3914ebab4ed4f2f9e8429780001940d.png 1.5x, ./a3914ebab4ed4f2f9e8429780001940d.png 2x"
        data-sizes="auto"
        alt="./a3914ebab4ed4f2f9e8429780001940d.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT UNIX_TIMESTAMP('2011-11-11 11:11:11')
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./1ed6ceae98ab4dedbf2be4f87c32def4.png"
        data-srcset="./1ed6ceae98ab4dedbf2be4f87c32def4.png, ./1ed6ceae98ab4dedbf2be4f87c32def4.png 1.5x, ./1ed6ceae98ab4dedbf2be4f87c32def4.png 2x"
        data-sizes="auto"
        alt="./1ed6ceae98ab4dedbf2be4f87c32def4.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT FROM_UNIXTIME(1576380910);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./ca86d89287be47fbbc0ccf542fb57a63.png"
        data-srcset="./ca86d89287be47fbbc0ccf542fb57a63.png, ./ca86d89287be47fbbc0ccf542fb57a63.png 1.5x, ./ca86d89287be47fbbc0ccf542fb57a63.png 2x"
        data-sizes="auto"
        alt="./ca86d89287be47fbbc0ccf542fb57a63.png"
        title="在这里插入图片描述" /></p>
<h3 id="1410-获取月份星期星期数天数等函数">14.10 获取月份、星期、星期数、天数等函数</h3>
<p>函数</p>
<p>用法</p>
<p>YEAR(date) / MONTH(date) / DAY(date)</p>
<p>返回具体的日期值</p>
<p>HOUR(time) / MINUTE(time) / SECOND(time)</p>
<p>返回具体的时间值</p>
<p>MONTHNAME(date)</p>
<p>返回月份：January，…</p>
<p>DAYNAME(date)</p>
<p>返回星期几：MONDAY，TUESDAY…SUNDAY</p>
<p>WEEKDAY(date)</p>
<p>返回周几，注意，周1是0，周2是1，。。。周日是6</p>
<p>QUARTER(date)</p>
<p>返回日期对应的季度，范围为1～4</p>
<p>WEEK(date) ， WEEKOFYEAR(date)</p>
<p>返回一年中的第几周</p>
<p>DAYOFYEAR(date)</p>
<p>返回日期是一年中的第几天</p>
<p>DAYOFMONTH(date)</p>
<p>返回日期位于所在月份的第几天</p>
<p>DAYOFWEEK(date)</p>
<p>返回周几，注意：周日是1，周一是2，。。。周六是7</p>
<pre><code>SELECT YEAR(CURDATE()),MONTH(CURDATE()),DAY(CURDATE()),
HOUR(CURTIME()),MINUTE(NOW()),SECOND(SYSDATE())
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./367b529c2c8540fe8e504595f8c9a326.png"
        data-srcset="./367b529c2c8540fe8e504595f8c9a326.png, ./367b529c2c8540fe8e504595f8c9a326.png 1.5x, ./367b529c2c8540fe8e504595f8c9a326.png 2x"
        data-sizes="auto"
        alt="./367b529c2c8540fe8e504595f8c9a326.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT MONTHNAME('2021-10-26'),DAYNAME('2021-10-26'),WEEKDAY('2021-10-26'),
QUARTER(CURDATE()),WEEK(CURDATE()),DAYOFYEAR(NOW()),
DAYOFMONTH(NOW()),DAYOFWEEK(NOW())
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./88c5ce12d5644e94aba87aade1bbec8b.png"
        data-srcset="./88c5ce12d5644e94aba87aade1bbec8b.png, ./88c5ce12d5644e94aba87aade1bbec8b.png 1.5x, ./88c5ce12d5644e94aba87aade1bbec8b.png 2x"
        data-sizes="auto"
        alt="./88c5ce12d5644e94aba87aade1bbec8b.png"
        title="在这里插入图片描述" /></p>
<h3 id="1411-日期的操作函数">14.11 日期的操作函数</h3>
<p>函数</p>
<p>用法</p>
<p>EXTRACT(type FROM date)</p>
<p>返回指定日期中特定的部分，type指定返回的值</p>
<p><strong>EXTRACT(type FROM date)函数中type的取值与含义：</strong></p>
<p>type取值</p>
<p>含义</p>
<p>–</p>
<p>–</p>
<p>MICROSECOND</p>
<p>返回毫秒值</p>
<p>SECOND</p>
<p>返回秒数</p>
<p>MINUTE</p>
<p>返回分钟数</p>
<p>HOUR</p>
<p>返回小时数</p>
<p>DAY</p>
<p>返回天数</p>
<p>WEEK</p>
<p>返回日期在一年中的第几个星期</p>
<p>MONTH</p>
<p>返回日期在一年中的第几个月</p>
<p>QUARTER</p>
<p>返回日期在一年中的第几个季度</p>
<p>YEAR</p>
<p>返回日期的年丰</p>
<p>SECOND_MICROSECOND</p>
<p>返回秒和毫秒值</p>
<p>MINUTE_MICROSECOND</p>
<p>返回分钟和毫秒值</p>
<p>MINUTE_SECOND</p>
<p>返回分钟和秒值</p>
<p>HOUR_MICROSECOND</p>
<p>返回小时和毫秒值</p>
<p>HOUR_SECOND</p>
<p>返回小时和秒值</p>
<p>HOUR_MINUTE</p>
<p>返回小时和分钟值</p>
<p>DAY_MICROSECOND</p>
<p>返回天和毫秒值</p>
<p>DAY_SECOND</p>
<p>返回天和秒值</p>
<p>DAY_MINUTE</p>
<p>返回天和分钟值</p>
<p>DAY_HOUR</p>
<p>返回天和小时</p>
<p>YEAR_MONTH</p>
<p>返回年和月</p>
<pre><code>SELECT EXTRACT(MINUTE FROM NOW()),EXTRACT( WEEK FROM NOW()),
EXTRACT( QUARTER FROM NOW()),EXTRACT( MINUTE_SECOND FROM NOW())
FROM DUAL;
</code></pre>
<h3 id="1412-时间和秒钟转换的函数">14.12 时间和秒钟转换的函数</h3>
<p>函数</p>
<p>用法</p>
<p>TIME_TO_SEC(time)</p>
<p>将 time 转化为秒并返回结果值。转化的公式为：小时_3600+分钟_60+秒</p>
<p>SEC_TO_TIME(seconds)</p>
<p>将 seconds 描述转化为包含小时、分钟和秒的时间</p>
<pre><code>SELECT TIME_TO_SEC(NOW());
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./e3f169857d144b3896f9a8ed4c16a73e.png"
        data-srcset="./e3f169857d144b3896f9a8ed4c16a73e.png, ./e3f169857d144b3896f9a8ed4c16a73e.png 1.5x, ./e3f169857d144b3896f9a8ed4c16a73e.png 2x"
        data-sizes="auto"
        alt="./e3f169857d144b3896f9a8ed4c16a73e.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT SEC_TO_TIME(71507);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./be4878706dbd489895b4b97a505fbce2.png"
        data-srcset="./be4878706dbd489895b4b97a505fbce2.png, ./be4878706dbd489895b4b97a505fbce2.png 1.5x, ./be4878706dbd489895b4b97a505fbce2.png 2x"
        data-sizes="auto"
        alt="./be4878706dbd489895b4b97a505fbce2.png"
        title="在这里插入图片描述" /></p>
<h3 id="1413-计算日期和时间的函数">14.13 计算日期和时间的函数</h3>
<p>第一组:</p>
<p>函数</p>
<p>用法</p>
<p>DATE_ADD(datetime, INTERVAL expr type)，ADDDATE(date,INTERVAL expr type)</p>
<p>返回与给定日期时间相差INTERVAL时间段的日期时间</p>
<p>DATE_SUB(date,INTERVAL expr type)，SUBDATE(date,INTERVAL expr type)</p>
<p>返回与date相差INTERVAL时间间隔的日期</p>
<p>上述函数中type的取值:</p>
<p>间隔类型</p>
<p>含义</p>
<p>HOUR</p>
<p>小时</p>
<p>MINUTE</p>
<p>分钟</p>
<p>SECOND</p>
<p>秒</p>
<p>YEAR</p>
<p>年</p>
<p>MONTH</p>
<p>月</p>
<p>DAY</p>
<p>日</p>
<p>YEAR_MONTH</p>
<p>年和月</p>
<p>DAY_HOUR</p>
<p>日和小时</p>
<p>DAY_MINUTE</p>
<p>日和分钟</p>
<p>DAY_SECOND</p>
<p>日和秒</p>
<p>HOUR_MINUTE</p>
<p>小时和分钟</p>
<p>HOUR_SECOND</p>
<p>小时和秒</p>
<p>MINUTE_SECOND</p>
<p>分钟和秒</p>
<pre><code>SELECT DATE_ADD(NOW(), INTERVAL 1 DAY) AS col1,DATE_ADD('2022-2-26 20:02:02',INTERVAL 1 SECOND) AS col2,
       ADDDATE('2022-2-26 20:02:02',INTERVAL 1 SECOND) AS col3,
       DATE_ADD('2022-2-26 20:02:02',INTERVAL '1_1' MINUTE_SECOND) AS col4,
       DATE_ADD(NOW(), INTERVAL -1 YEAR) AS col5, #可以是负数
       DATE_ADD(NOW(), INTERVAL '1_1' YEAR_MONTH) AS col6 #需要单引号
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./77453bf238d04b628e295667ea2101bd.png"
        data-srcset="./77453bf238d04b628e295667ea2101bd.png, ./77453bf238d04b628e295667ea2101bd.png 1.5x, ./77453bf238d04b628e295667ea2101bd.png 2x"
        data-sizes="auto"
        alt="./77453bf238d04b628e295667ea2101bd.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT DATE_SUB('2022-2-26',INTERVAL 31 DAY) AS col1,
       SUBDATE('2022-2-26',INTERVAL 31 DAY) AS col2,
       DATE_SUB('2022-2-26 20:04:02',INTERVAL '1 1' DAY_HOUR) AS col3
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./843b241a153347e4af6a543a75d5f201.png"
        data-srcset="./843b241a153347e4af6a543a75d5f201.png, ./843b241a153347e4af6a543a75d5f201.png 1.5x, ./843b241a153347e4af6a543a75d5f201.png 2x"
        data-sizes="auto"
        alt="./843b241a153347e4af6a543a75d5f201.png"
        title="在这里插入图片描述" />
第二组:</p>
<p>函数</p>
<p>用法</p>
<p>ADDTIME(time1,time2)</p>
<p>返回time1加上time2的时间。当time2为一个数字时，代表的是<code>秒</code>，可以为负数</p>
<p>SUBTIME(time1,time2)</p>
<p>返回time1减去time2后的时间。当time2为一个数字时，代表的是<code>秒</code>，可以为负数</p>
<p>DATEDIFF(date1,date2)</p>
<p>返回date1 - date2的日期间隔天数</p>
<p>TIMEDIFF(time1, time2)</p>
<p>返回time1 - time2的时间间隔</p>
<p>FROM_DAYS(N)</p>
<p>返回从0000年1月1日起，N天以后的日期</p>
<p>TO_DAYS(date)</p>
<p>返回日期date距离0000年1月1日的天数</p>
<p>LAST_DAY(date)</p>
<p>返回date所在月份的最后一天的日期</p>
<p>MAKEDATE(year,n)</p>
<p>针对给定年份与所在年份中的天数返回一个日期</p>
<p>MAKETIME(hour,minute,second)</p>
<p>将给定的小时、分钟和秒组合成时间并返回</p>
<p>PERIOD_ADD(time,n)</p>
<p>返回time加上n后的时间</p>
<pre><code>SELECT ADDTIME(NOW(),20),SUBTIME(NOW(),30),SUBTIME(NOW(),'1:1:3'),DATEDIFF(NOW(),'2022-2-26'),
       TIMEDIFF(NOW(),'2022-2-26 20:06:52'),FROM_DAYS(366),TO_DAYS('0000-12-25'),
       LAST_DAY(NOW()),MAKEDATE(YEAR(NOW()),12),MAKETIME(10,21,23),PERIOD_ADD(20200101010101,10)
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./b6a1b7646f7a4f689d56011cc0566e1b.png"
        data-srcset="./b6a1b7646f7a4f689d56011cc0566e1b.png, ./b6a1b7646f7a4f689d56011cc0566e1b.png 1.5x, ./b6a1b7646f7a4f689d56011cc0566e1b.png 2x"
        data-sizes="auto"
        alt="./b6a1b7646f7a4f689d56011cc0566e1b.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT ADDTIME(NOW(),50); #当期时间加50秒
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./e82ac2c574754169a6ccd6b6ed9d1994.png"
        data-srcset="./e82ac2c574754169a6ccd6b6ed9d1994.png, ./e82ac2c574754169a6ccd6b6ed9d1994.png 1.5x, ./e82ac2c574754169a6ccd6b6ed9d1994.png 2x"
        data-sizes="auto"
        alt="./e82ac2c574754169a6ccd6b6ed9d1994.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT ADDTIME(NOW(),'1:1:1'); #当前时间加1小时1分钟1秒
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./737d3dfa22ca46aabe22118d4c76dc6b.png"
        data-srcset="./737d3dfa22ca46aabe22118d4c76dc6b.png, ./737d3dfa22ca46aabe22118d4c76dc6b.png 1.5x, ./737d3dfa22ca46aabe22118d4c76dc6b.png 2x"
        data-sizes="auto"
        alt="./737d3dfa22ca46aabe22118d4c76dc6b.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT SUBTIME(NOW(),'1:1:1'); #当前时间减1小时1分钟1秒
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./ceabd8f6c1ff4d94aa677bd08bbc59a3.png"
        data-srcset="./ceabd8f6c1ff4d94aa677bd08bbc59a3.png, ./ceabd8f6c1ff4d94aa677bd08bbc59a3.png 1.5x, ./ceabd8f6c1ff4d94aa677bd08bbc59a3.png 2x"
        data-sizes="auto"
        alt="./ceabd8f6c1ff4d94aa677bd08bbc59a3.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT SUBTIME(NOW(), '-1:-1:-1');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./9efc898eed13430b8e76541211974baf.png"
        data-srcset="./9efc898eed13430b8e76541211974baf.png, ./9efc898eed13430b8e76541211974baf.png 1.5x, ./9efc898eed13430b8e76541211974baf.png 2x"
        data-sizes="auto"
        alt="./9efc898eed13430b8e76541211974baf.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT FROM_DAYS(366);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./fdc0ab1da5894dc498cf1aaab903f361.png"
        data-srcset="./fdc0ab1da5894dc498cf1aaab903f361.png, ./fdc0ab1da5894dc498cf1aaab903f361.png 1.5x, ./fdc0ab1da5894dc498cf1aaab903f361.png 2x"
        data-sizes="auto"
        alt="./fdc0ab1da5894dc498cf1aaab903f361.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT MAKEDATE(2022,1);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./ed35dd1ec14a4e01a1dee202f3c9e3a3.png"
        data-srcset="./ed35dd1ec14a4e01a1dee202f3c9e3a3.png, ./ed35dd1ec14a4e01a1dee202f3c9e3a3.png 1.5x, ./ed35dd1ec14a4e01a1dee202f3c9e3a3.png 2x"
        data-sizes="auto"
        alt="./ed35dd1ec14a4e01a1dee202f3c9e3a3.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT MAKETIME(1,1,1);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./900b7a90db0940ac9833f168165a67e6.png"
        data-srcset="./900b7a90db0940ac9833f168165a67e6.png, ./900b7a90db0940ac9833f168165a67e6.png 1.5x, ./900b7a90db0940ac9833f168165a67e6.png 2x"
        data-sizes="auto"
        alt="./900b7a90db0940ac9833f168165a67e6.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT PERIOD_ADD(20200101010101,1);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./eb5239c0ab7b495982a8b6688eba7027.png"
        data-srcset="./eb5239c0ab7b495982a8b6688eba7027.png, ./eb5239c0ab7b495982a8b6688eba7027.png 1.5x, ./eb5239c0ab7b495982a8b6688eba7027.png 2x"
        data-sizes="auto"
        alt="./eb5239c0ab7b495982a8b6688eba7027.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT TO_DAYS(NOW());
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./c7bdb33bf68b47bd984d0214884a4312.png"
        data-srcset="./c7bdb33bf68b47bd984d0214884a4312.png, ./c7bdb33bf68b47bd984d0214884a4312.png 1.5x, ./c7bdb33bf68b47bd984d0214884a4312.png 2x"
        data-sizes="auto"
        alt="./c7bdb33bf68b47bd984d0214884a4312.png"
        title="在这里插入图片描述" /></p>
<h1 id="查询-7-天内的新增用户数有多少">查询 7 天内的新增用户数有多少？</h1>
<pre><code>SELECT COUNT(*) AS num FROM new_user WHERE TO_DAYS(NOW())-TO_DAYS(regist_time)&lt;=7
</code></pre>
<h2 id="15-日期的格式化与解析">15 日期的格式化与解析</h2>
<p>函数</p>
<p>用法</p>
<p>DATE_FORMAT(date,fmt)</p>
<p>按照字符串fmt格式化日期date值</p>
<p>TIME_FORMAT(time,fmt)</p>
<p>按照字符串fmt格式化时间time值</p>
<p>GET_FORMAT(date_type,format_type)</p>
<p>返回日期字符串的显示格式</p>
<p>STR_TO_DATE(str, fmt)</p>
<p>按照字符串fmt对str进行解析，解析为一个日期</p>
<p>上述非GET_FORMAT函数中fmt参数常用的格式符：</p>
<p>格式符</p>
<p>说明</p>
<p>格式符</p>
<p>说明</p>
<p>%Y</p>
<p>4位数字表示年份</p>
<p>%y</p>
<p>表示两位数字表示年份</p>
<p>%M</p>
<p>月名表示月份(January,…)</p>
<p>%m</p>
<p>两位数字表示月份(01,02,03。。。)</p>
<p>%b</p>
<p>缩写的月名(Jan.，Feb.，…)</p>
<p>%c</p>
<p>数字表示月份(1,2,3,…)</p>
<p>%D</p>
<p>英文后缀表示月中的天数(1st,2nd,3rd,…)</p>
<p>%d</p>
<p>两位数字表示月中的天数(01,02…)</p>
<p>%e</p>
<p>数字形式表示月中的天数(1,2,3,4,5…)</p>
<p>%H</p>
<p>两位数字表示小数，24小时制(01,02…)</p>
<p>%h和%I</p>
<p>两位数字表示小时，12小时制(01,02…)</p>
<p>%k</p>
<p>数字形式的小时，24小时制(1,2,3)</p>
<p>%l</p>
<p>数字形式表示小时，12小时制(1,2,3,4…)</p>
<p>%i</p>
<p>两位数字表示分钟(00,01,02)</p>
<p>%S和%s</p>
<p>两位数字表示秒(00,01,02…)</p>
<p>%W</p>
<p>一周中的星期名称(Sunday…)</p>
<p>%a</p>
<p>一周中的星期缩写(Sun.，Mon.,Tues.，…)</p>
<p>%w</p>
<p>以数字表示周中的天数(0=Sunday,1=Monday…)</p>
<p>%j</p>
<p>以3位数字表示年中的天数(001,002…)</p>
<p>%U</p>
<p>以数字表示年中的第几周，(1,2,3。。)其中Sunday为周中第一天</p>
<p>%u</p>
<p>以数字表示年中的第几周，(1,2,3。。)其中Monday为周中第一天</p>
<p>%T</p>
<p>24小时制</p>
<p>%r</p>
<p>12小时制</p>
<p>%p</p>
<p>AM或PM</p>
<p>%%</p>
<p>表示%</p>
<p>GET_FORMAT函数中date_type和format_type参数取值如下：</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-3240356.png"
        data-srcset="./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-3240356.png, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-3240356.png 1.5x, ./watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBA6Zmz6aiw6aOb%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16-3240356.png 2x"
        data-sizes="auto"
        alt="./watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6Zmz6aiw6aOb,size_20,color_FFFFFF,t_70,g_se,x_16-3240356.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT DATE_FORMAT(NOW(), '%H:%i:%s');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./b0a32727980f4964badc1c2acd75bb20.png"
        data-srcset="./b0a32727980f4964badc1c2acd75bb20.png, ./b0a32727980f4964badc1c2acd75bb20.png 1.5x, ./b0a32727980f4964badc1c2acd75bb20.png 2x"
        data-sizes="auto"
        alt="./b0a32727980f4964badc1c2acd75bb20.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT STR_TO_DATE('09/01/2009','%m/%d/%Y')
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./0cacd611aeee41129e022d7dee5646ee.png"
        data-srcset="./0cacd611aeee41129e022d7dee5646ee.png, ./0cacd611aeee41129e022d7dee5646ee.png 1.5x, ./0cacd611aeee41129e022d7dee5646ee.png 2x"
        data-sizes="auto"
        alt="./0cacd611aeee41129e022d7dee5646ee.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT STR_TO_DATE('20140422154706','%Y%m%d%H%i%s')
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./e6e53a54896c4cb7b6734369f2230622.png"
        data-srcset="./e6e53a54896c4cb7b6734369f2230622.png, ./e6e53a54896c4cb7b6734369f2230622.png 1.5x, ./e6e53a54896c4cb7b6734369f2230622.png 2x"
        data-sizes="auto"
        alt="./e6e53a54896c4cb7b6734369f2230622.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT STR_TO_DATE('2014-04-22 15:47:06','%Y-%m-%d %H:%i:%s')
FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./72bc357a74604c76a750992b74519a45.png"
        data-srcset="./72bc357a74604c76a750992b74519a45.png, ./72bc357a74604c76a750992b74519a45.png 1.5x, ./72bc357a74604c76a750992b74519a45.png 2x"
        data-sizes="auto"
        alt="./72bc357a74604c76a750992b74519a45.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT GET_FORMAT(DATE, 'USA');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./573c9396b7694572886270af9d5d88d8.png"
        data-srcset="./573c9396b7694572886270af9d5d88d8.png, ./573c9396b7694572886270af9d5d88d8.png 1.5x, ./573c9396b7694572886270af9d5d88d8.png 2x"
        data-sizes="auto"
        alt="./573c9396b7694572886270af9d5d88d8.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT DATE_FORMAT(NOW(),GET_FORMAT(DATE,'USA')) FROM DUAL;
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./611ca03eee20413084b582eadde75aa7.png"
        data-srcset="./611ca03eee20413084b582eadde75aa7.png, ./611ca03eee20413084b582eadde75aa7.png 1.5x, ./611ca03eee20413084b582eadde75aa7.png 2x"
        data-sizes="auto"
        alt="./611ca03eee20413084b582eadde75aa7.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT STR_TO_DATE('2020-01-01 00:00:00','%Y-%m-%d');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./90b532ad482047f894c3a99e5f9035d3.png"
        data-srcset="./90b532ad482047f894c3a99e5f9035d3.png, ./90b532ad482047f894c3a99e5f9035d3.png 1.5x, ./90b532ad482047f894c3a99e5f9035d3.png 2x"
        data-sizes="auto"
        alt="./90b532ad482047f894c3a99e5f9035d3.png"
        title="在这里插入图片描述" /></p>
<h2 id="75-流程控制函数">7.5 流程控制函数</h2>
<blockquote>
<p>流程处理函数可以根据不同的条件，执行不同的处理流程，可以在SQL语句中实现不同的条件选择。MySQL中的流程处理函数主要包括IF()、IFNULL()和CASE()函数。</p>
</blockquote>
<p>函数</p>
<p>用法</p>
<p>IF(value,value1,value2)</p>
<p>如果value的值为TRUE，返回value1，否则返回value2</p>
<p>IFNULL(value1, value2)</p>
<p>如果value1不为NULL，返回value1，否则返回value2</p>
<p>CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 … [ELSE resultn] END</p>
<p>相当于Java的if…else if…else…</p>
<p>CASE expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 … [ELSE 值n] END</p>
<p>相当于Java的switch…case…</p>
<pre><code>SELECT IF(1&gt;0,'正确','错误')
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./041fe748a5c2449eb44f06a104c2fddc.png"
        data-srcset="./041fe748a5c2449eb44f06a104c2fddc.png, ./041fe748a5c2449eb44f06a104c2fddc.png 1.5x, ./041fe748a5c2449eb44f06a104c2fddc.png 2x"
        data-sizes="auto"
        alt="./041fe748a5c2449eb44f06a104c2fddc.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT IFNULL(NULL,'Hello Word');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./85a2986aed5e4c16ab294045b21877b1.png"
        data-srcset="./85a2986aed5e4c16ab294045b21877b1.png, ./85a2986aed5e4c16ab294045b21877b1.png 1.5x, ./85a2986aed5e4c16ab294045b21877b1.png 2x"
        data-sizes="auto"
        alt="./85a2986aed5e4c16ab294045b21877b1.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT CASE WHEN 1 &gt; 0 THEN '1&gt;0'
            WHEN 2 &gt; 0 THEN '2&gt;0'
       ELSE '3 &gt; 0'
       END;


SELECT employee_id,salary, CASE WHEN salary&gt;=15000 THEN '高薪'
				  WHEN salary&gt;=10000 THEN '潜力股'
				  WHEN salary&gt;=8000 THEN '屌丝'
				  ELSE '草根' END  &quot;描述&quot;
FROM employees;
SELECT oid,`status`, CASE `status` WHEN 1 THEN '未付款'
								   WHEN 2 THEN '已付款'
								   WHEN 3 THEN '已发货'
								   WHEN 4 THEN '确认收货'
								   ELSE '无效订单' END
FROM t_order;
</code></pre>
<h2 id="76-流程控制函数">7.6 流程控制函数</h2>
<blockquote>
<p>加密与解密函数主要用于对数据库中的数据进行加密和解密处理，以防止数据被他人窃取。这些函数在保证数据库安全时非常有用。</p>
</blockquote>
<p>函数</p>
<p>用法</p>
<p>PASSWORD(str)</p>
<p>返回字符串str的加密版本，41位长的字符串。加密结果不可逆，常用于用户的密码加密</p>
<p>MD5(str)</p>
<p>返回字符串str的md5加密后的值，也是一种加密方式。若参数为NULL，则会返回NULL</p>
<p>SHA(str)</p>
<p>从原明文密码str计算并返回加密后的密码字符串，当参数为NULL时，返回NULL。SHA加密算法比MD5更加安全。</p>
<p>ENCODE(value,password_seed)</p>
<p>返回使用password_seed作为加密密码加密value</p>
<p>DECODE(value,password_seed)</p>
<p>返回使用password_seed作为加密密码解密value</p>
<blockquote>
<p>可以看到，ENCODE(value,password_seed)函数与DECODE(value,password_seed)函数互为反函数。</p>
</blockquote>
<pre><code>mysql&gt; SELECT PASSWORD('mysql'), PASSWORD(NULL);
+-------------------------------------------+----------------+
| PASSWORD('mysql')                         | PASSWORD(NULL) |
+-------------------------------------------+----------------+
| *E74858DB86EBA20BC33D0AECAE8A8108C56B17FA |                |
+-------------------------------------------+----------------+
1 row in set, 1 warning (0.00 sec)


SELECT md5('123')
-&gt;202cb962ac59075b964b07152d234b70


SELECT SHA('Tom123')
-&gt;c7c506980abc31cc390a2438c90861d0f1216d50


mysql&gt; SELECT ENCODE('mysql', 'mysql');
+--------------------------+
| ENCODE('mysql', 'mysql') |
+--------------------------+
| íg　¼　ìÉ                  |
+--------------------------+
1 row in set, 1 warning (0.01 sec)


mysql&gt; SELECT DECODE(ENCODE('mysql','mysql'),'mysql');
+-----------------------------------------+
| DECODE(ENCODE('mysql','mysql'),'mysql') |
+-----------------------------------------+
| mysql                                   |
+-----------------------------------------+
1 row in set, 2 warnings (0.00 sec)
</code></pre>
<h2 id="77-mysql信息函数">7.7 MySQL信息函数</h2>
<blockquote>
<p>MySQL中内置了一些可以查询MySQL信息的函数，这些函数主要用于帮助数据库开发或运维人员更好地对数据库进行维护工作。</p>
</blockquote>
<p>函数</p>
<p>用法</p>
<p>VERSION()</p>
<p>返回当前MySQL的版本号</p>
<p>CONNECTION_ID()</p>
<p>返回当前MySQL服务器的连接数</p>
<p>DATABASE()，SCHEMA()</p>
<p>返回MySQL命令行当前所在的数据库</p>
<p>USER()，CURRENT_USER()、SYSTEM_USER()，SESSION_USER()</p>
<p>返回当前连接MySQL的用户名，返回结果格式为“主机名@用户名”</p>
<p>CHARSET(value)</p>
<p>返回字符串value自变量的字符集</p>
<p>COLLATION(value)</p>
<p>返回字符串value的比较规则</p>
<pre><code> SELECT DATABASE();
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./92178882cd3040e3904289bcc1562749.png"
        data-srcset="./92178882cd3040e3904289bcc1562749.png, ./92178882cd3040e3904289bcc1562749.png 1.5x, ./92178882cd3040e3904289bcc1562749.png 2x"
        data-sizes="auto"
        alt="./92178882cd3040e3904289bcc1562749.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT USER(), CURRENT_USER(), SYSTEM_USER(),SESSION_USER();
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./f72ddc523ec24db78ecfae7fa2860758.png"
        data-srcset="./f72ddc523ec24db78ecfae7fa2860758.png, ./f72ddc523ec24db78ecfae7fa2860758.png 1.5x, ./f72ddc523ec24db78ecfae7fa2860758.png 2x"
        data-sizes="auto"
        alt="./f72ddc523ec24db78ecfae7fa2860758.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT CHARSET('ABC');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./3376496e1a9e4e629853646ba6ab2371.png"
        data-srcset="./3376496e1a9e4e629853646ba6ab2371.png, ./3376496e1a9e4e629853646ba6ab2371.png 1.5x, ./3376496e1a9e4e629853646ba6ab2371.png 2x"
        data-sizes="auto"
        alt="./3376496e1a9e4e629853646ba6ab2371.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT COLLATION('ABC');
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./38001c9a4f724e09b661acb54ebbb836.png"
        data-srcset="./38001c9a4f724e09b661acb54ebbb836.png, ./38001c9a4f724e09b661acb54ebbb836.png 1.5x, ./38001c9a4f724e09b661acb54ebbb836.png 2x"
        data-sizes="auto"
        alt="./38001c9a4f724e09b661acb54ebbb836.png"
        title="在这里插入图片描述" /></p>
<h2 id="78-其他函数">7.8 其他函数</h2>
<blockquote>
<p>MySQL中有些函数无法对其进行具体的分类，但是这些函数在MySQL的开发和运维过程中也是不容忽视的。</p>
</blockquote>
<p>函数</p>
<p>用法</p>
<p>FORMAT(value,n)</p>
<p>返回对数字value进行格式化后的结果数据。n表示四舍五入后保留到小数点后n位</p>
<p>CONV(value,from,to)</p>
<p>将value的值进行不同进制之间的转换</p>
<p>INET_ATON(ipvalue)</p>
<p>将以点分隔的IP地址转化为一个数字</p>
<p>INET_NTOA(value)</p>
<p>将数字形式的IP地址转化为以点分隔的IP地址</p>
<p>BENCHMARK(n,expr)</p>
<p>将表达式expr重复执行n次。用于测试MySQL处理expr表达式所耗费的时间</p>
<p>CONVERT(value USING char_code)</p>
<p>将value所使用的字符编码修改为char_code</p>
<h1 id="如果n的值小于或者等于0则只保留整数部分">如果n的值小于或者等于0，则只保留整数部分</h1>
<pre><code>SELECT FORMAT(123.123, 2), FORMAT(123.523, 0), FORMAT(123.123, -2);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./149bcd03c4c74914a75b02f7cba35dd4.png"
        data-srcset="./149bcd03c4c74914a75b02f7cba35dd4.png, ./149bcd03c4c74914a75b02f7cba35dd4.png 1.5x, ./149bcd03c4c74914a75b02f7cba35dd4.png 2x"
        data-sizes="auto"
        alt="./149bcd03c4c74914a75b02f7cba35dd4.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT CONV(16, 10, 2), CONV(8888,10,16), CONV(NULL, 10, 2);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./7f35906c0ca04cd9b450cc4fc63c8078.png"
        data-srcset="./7f35906c0ca04cd9b450cc4fc63c8078.png, ./7f35906c0ca04cd9b450cc4fc63c8078.png 1.5x, ./7f35906c0ca04cd9b450cc4fc63c8078.png 2x"
        data-sizes="auto"
        alt="./7f35906c0ca04cd9b450cc4fc63c8078.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT INET_ATON('192.168.1.100');
</code></pre>
<h1 id="以1921681100为例计算方式为192乘以256的3次方加上168乘以256的2次方加上1乘以256再加上100">以“192.168.1.100”为例，计算方式为192乘以256的3次方，加上168乘以256的2次方，加上1乘以256，再加上100。</h1>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./27a2424ee0bd4998895fdbfab5d5f7ae.png"
        data-srcset="./27a2424ee0bd4998895fdbfab5d5f7ae.png, ./27a2424ee0bd4998895fdbfab5d5f7ae.png 1.5x, ./27a2424ee0bd4998895fdbfab5d5f7ae.png 2x"
        data-sizes="auto"
        alt="./27a2424ee0bd4998895fdbfab5d5f7ae.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT INET_NTOA(3232235876);
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./15e49d139fd54125b9607dad465e0403.png"
        data-srcset="./15e49d139fd54125b9607dad465e0403.png, ./15e49d139fd54125b9607dad465e0403.png 1.5x, ./15e49d139fd54125b9607dad465e0403.png 2x"
        data-sizes="auto"
        alt="./15e49d139fd54125b9607dad465e0403.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT BENCHMARK(1, MD5('mysql'));
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./5cca5d9899094724addd192ff3fb74f9.png"
        data-srcset="./5cca5d9899094724addd192ff3fb74f9.png, ./5cca5d9899094724addd192ff3fb74f9.png 1.5x, ./5cca5d9899094724addd192ff3fb74f9.png 2x"
        data-sizes="auto"
        alt="./5cca5d9899094724addd192ff3fb74f9.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT BENCHMARK(1000000, MD5('mysql'));
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./94644cc54380410c9b208ab1e6a5ad3f.png"
        data-srcset="./94644cc54380410c9b208ab1e6a5ad3f.png, ./94644cc54380410c9b208ab1e6a5ad3f.png 1.5x, ./94644cc54380410c9b208ab1e6a5ad3f.png 2x"
        data-sizes="auto"
        alt="./94644cc54380410c9b208ab1e6a5ad3f.png"
        title="在这里插入图片描述" /></p>
<pre><code>SELECT CHARSET('mysql'), CHARSET(CONVERT('mysql' USING 'utf8'));
</code></pre>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="./2a542413a53d4981bb913f3f5a3aea65.png"
        data-srcset="./2a542413a53d4981bb913f3f5a3aea65.png, ./2a542413a53d4981bb913f3f5a3aea65.png 1.5x, ./2a542413a53d4981bb913f3f5a3aea65.png 2x"
        data-sizes="auto"
        alt="./2a542413a53d4981bb913f3f5a3aea65.png"
        title="在这里插入图片描述" /></p>
<h2 id="16-练习sql">16 练习sql</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="err">第</span><span class="mi">07</span><span class="err">章</span><span class="n">_</span><span class="err">单行函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">数值函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">基本的操作</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">ABS</span><span class="p">(</span><span class="o">-</span><span class="mi">123</span><span class="p">),</span><span class="k">ABS</span><span class="p">(</span><span class="mi">32</span><span class="p">),</span><span class="n">SIGN</span><span class="p">(</span><span class="o">-</span><span class="mi">23</span><span class="p">),</span><span class="n">SIGN</span><span class="p">(</span><span class="mi">43</span><span class="p">),</span><span class="n">PI</span><span class="p">(),</span><span class="n">CEIL</span><span class="p">(</span><span class="mi">32</span><span class="p">.</span><span class="mi">32</span><span class="p">),</span><span class="n">CEILING</span><span class="p">(</span><span class="o">-</span><span class="mi">43</span><span class="p">.</span><span class="mi">23</span><span class="p">),</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">32</span><span class="p">.</span><span class="mi">32</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">FLOOR</span><span class="p">(</span><span class="o">-</span><span class="mi">43</span><span class="p">.</span><span class="mi">23</span><span class="p">),</span><span class="k">MOD</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="mi">12</span><span class="w"> </span><span class="k">MOD</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">取随机数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">RAND</span><span class="p">(),</span><span class="n">RAND</span><span class="p">(),</span><span class="n">RAND</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">RAND</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">RAND</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="n">RAND</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">四舍五入，截断操作</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ROUND</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">556</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ROUND</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">153</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="k">TRUNCATE</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">496</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="k">TRUNCATE</span><span class="p">(</span><span class="mi">129</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">单行函数可以嵌套</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="p">(</span><span class="n">ROUND</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">角度与弧度的互换</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">45</span><span class="p">),</span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">90</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DEGREES</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">PI</span><span class="p">()),</span><span class="n">DEGREES</span><span class="p">(</span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">60</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">三角函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">SIN</span><span class="p">(</span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">30</span><span class="p">)),</span><span class="n">DEGREES</span><span class="p">(</span><span class="n">ASIN</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span><span class="n">TAN</span><span class="p">(</span><span class="n">RADIANS</span><span class="p">(</span><span class="mi">45</span><span class="p">)),</span><span class="n">DEGREES</span><span class="p">(</span><span class="n">ATAN</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">指数和对数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">POW</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">POWER</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">EXP</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">LN</span><span class="p">(</span><span class="n">EXP</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span><span class="n">LOG</span><span class="p">(</span><span class="n">EXP</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span><span class="n">LOG10</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">LOG2</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">进制间的转换</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">BIN</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">HEX</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">OCT</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="n">CONV</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">字符串函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ASCII</span><span class="p">(</span><span class="s1">&#39;Abcdfsf&#39;</span><span class="p">),</span><span class="k">CHAR_LENGTH</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">),</span><span class="k">CHAR_LENGTH</span><span class="p">(</span><span class="s1">&#39;我们&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">LENGTH</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">),</span><span class="k">LENGTH</span><span class="p">(</span><span class="s1">&#39;我们&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">xxx</span><span class="w"> </span><span class="n">worked</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">yyy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="n">emp</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="s1">&#39; worked for &#39;</span><span class="p">,</span><span class="n">mgr</span><span class="p">.</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">emp</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">employees</span><span class="w"> </span><span class="n">mgr</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">emp</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">employee_id</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CONCAT_WS</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="s1">&#39;world&#39;</span><span class="p">,</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="s1">&#39;beijing&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">字符串的索引是从</span><span class="mi">1</span><span class="err">开始的！</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">INSERT</span><span class="p">(</span><span class="s1">&#39;helloworld&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;aaaaa&#39;</span><span class="p">),</span><span class="k">REPLACE</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="s1">&#39;lol&#39;</span><span class="p">,</span><span class="s1">&#39;mmm&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">UPPER</span><span class="p">(</span><span class="s1">&#39;HelLo&#39;</span><span class="p">),</span><span class="k">LOWER</span><span class="p">(</span><span class="s1">&#39;HelLo&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="k">LOWER</span><span class="p">(</span><span class="n">last_name</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;King&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">LEFT</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="k">RIGHT</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="k">RIGHT</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="mi">13</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">LPAD</span><span class="p">:</span><span class="err">实现右对齐效果</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">RPAD</span><span class="p">:</span><span class="err">实现左对齐效果</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">LPAD</span><span class="p">(</span><span class="n">salary</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="s1">&#39;---&#39;</span><span class="p">,</span><span class="n">LTRIM</span><span class="p">(</span><span class="s1">&#39;    h  el  lo   &#39;</span><span class="p">),</span><span class="s1">&#39;***&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">TRIM</span><span class="p">(</span><span class="s1">&#39;oo&#39;</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="s1">&#39;ooheollo&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">REPEAT</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="k">LENGTH</span><span class="p">(</span><span class="k">SPACE</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span><span class="n">STRCMP</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span><span class="s1">&#39;abe&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">SUBSTR</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">LOCATE</span><span class="p">(</span><span class="s1">&#39;lll&#39;</span><span class="p">,</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ELT</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">),</span><span class="n">FIELD</span><span class="p">(</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span><span class="s1">&#39;gg&#39;</span><span class="p">,</span><span class="s1">&#39;jj&#39;</span><span class="p">,</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span><span class="s1">&#39;dd&#39;</span><span class="p">,</span><span class="s1">&#39;mm&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">FIND_IN_SET</span><span class="p">(</span><span class="s1">&#39;mm&#39;</span><span class="p">,</span><span class="s1">&#39;gg,mm,jj,dd,mm,gg&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="k">NULLIF</span><span class="p">(</span><span class="k">LENGTH</span><span class="p">(</span><span class="n">first_name</span><span class="p">),</span><span class="k">LENGTH</span><span class="p">(</span><span class="n">last_name</span><span class="p">))</span><span class="w"> </span><span class="s2">&#34;compare&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">日期和时间函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">获取日期、时间</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">(),</span><span class="k">CURRENT_DATE</span><span class="p">(),</span><span class="n">CURTIME</span><span class="p">(),</span><span class="n">NOW</span><span class="p">(),</span><span class="n">SYSDATE</span><span class="p">(),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">UTC_DATE</span><span class="p">(),</span><span class="n">UTC_TIME</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">(),</span><span class="n">CURDATE</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="n">CURTIME</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="n">NOW</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">日期与时间戳的转换</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">UNIX_TIMESTAMP</span><span class="p">(),</span><span class="n">UNIX_TIMESTAMP</span><span class="p">(</span><span class="s1">&#39;2021-10-01 12:12:32&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">FROM_UNIXTIME</span><span class="p">(</span><span class="mi">1635173853</span><span class="p">),</span><span class="n">FROM_UNIXTIME</span><span class="p">(</span><span class="mi">1633061552</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">获取月份、星期、星期数、天数等函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">YEAR</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">()),</span><span class="k">MONTH</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">()),</span><span class="k">DAY</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">()),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">HOUR</span><span class="p">(</span><span class="n">CURTIME</span><span class="p">()),</span><span class="k">MINUTE</span><span class="p">(</span><span class="n">NOW</span><span class="p">()),</span><span class="k">SECOND</span><span class="p">(</span><span class="n">SYSDATE</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">MONTHNAME</span><span class="p">(</span><span class="s1">&#39;2021-10-26&#39;</span><span class="p">),</span><span class="n">DAYNAME</span><span class="p">(</span><span class="s1">&#39;2021-10-26&#39;</span><span class="p">),</span><span class="n">WEEKDAY</span><span class="p">(</span><span class="s1">&#39;2021-10-26&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">QUARTER</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">()),</span><span class="n">WEEK</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">()),</span><span class="n">DAYOFYEAR</span><span class="p">(</span><span class="n">NOW</span><span class="p">()),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DAYOFMONTH</span><span class="p">(</span><span class="n">NOW</span><span class="p">()),</span><span class="n">DAYOFWEEK</span><span class="p">(</span><span class="n">NOW</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">日期的操作函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">EXTRACT</span><span class="p">(</span><span class="k">SECOND</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">NOW</span><span class="p">()),</span><span class="k">EXTRACT</span><span class="p">(</span><span class="k">DAY</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">NOW</span><span class="p">()),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">EXTRACT</span><span class="p">(</span><span class="n">HOUR_MINUTE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">NOW</span><span class="p">()),</span><span class="k">EXTRACT</span><span class="p">(</span><span class="n">QUARTER</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="s1">&#39;2021-05-12&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">时间和秒钟转换的函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">TIME_TO_SEC</span><span class="p">(</span><span class="n">CURTIME</span><span class="p">()),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">SEC_TO_TIME</span><span class="p">(</span><span class="mi">83355</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">计算日期和时间的函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">NOW</span><span class="p">(),</span><span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">YEAR</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="nb">INTERVAL</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">YEAR</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_SUB</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">YEAR</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">DAY</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">&#39;2021-10-21 23:32:12&#39;</span><span class="p">,</span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">SECOND</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">col2</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ADDDATE</span><span class="p">(</span><span class="s1">&#39;2021-10-21 23:32:12&#39;</span><span class="p">,</span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">SECOND</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">col3</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">&#39;2021-10-21 23:32:12&#39;</span><span class="p">,</span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;1_1&#39;</span><span class="w"> </span><span class="n">MINUTE_SECOND</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">col4</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">YEAR</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="err">可以是负数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="s1">&#39;1_1&#39;</span><span class="w"> </span><span class="n">YEAR_MONTH</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">col6</span><span class="w"> </span><span class="o">#</span><span class="err">需要单引号</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">ADDTIME</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="mi">20</span><span class="p">),</span><span class="n">SUBTIME</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="mi">30</span><span class="p">),</span><span class="n">SUBTIME</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="s1">&#39;1:1:3&#39;</span><span class="p">),</span><span class="n">DATEDIFF</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="s1">&#39;2021-10-01&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">TIMEDIFF</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="s1">&#39;2021-10-25 22:10:10&#39;</span><span class="p">),</span><span class="n">FROM_DAYS</span><span class="p">(</span><span class="mi">366</span><span class="p">),</span><span class="n">TO_DAYS</span><span class="p">(</span><span class="s1">&#39;0000-12-25&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">LAST_DAY</span><span class="p">(</span><span class="n">NOW</span><span class="p">()),</span><span class="n">MAKEDATE</span><span class="p">(</span><span class="k">YEAR</span><span class="p">(</span><span class="n">NOW</span><span class="p">()),</span><span class="mi">32</span><span class="p">),</span><span class="n">MAKETIME</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span><span class="n">PERIOD_ADD</span><span class="p">(</span><span class="mi">20200101010101</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">日期的格式化与解析</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">格式化：日期</span><span class="w"> </span><span class="c1">---&gt; 字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">#</span><span class="w"> </span><span class="err">解析：</span><span class="w">  </span><span class="err">字符串</span><span class="w"> </span><span class="c1">----&gt; 日期
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">此时我们谈的是日期的显式格式化和解析</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">之前，我们接触过隐式的格式化或解析</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">hire_date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1993-01-13&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">格式化：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">(),</span><span class="s1">&#39;%Y-%M-%D&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">),</span><span class="n">TIME_FORMAT</span><span class="p">(</span><span class="n">CURTIME</span><span class="p">(),</span><span class="s1">&#39;%h:%i:%S&#39;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="s1">&#39;%Y-%M-%D %h:%i:%S %W %w %T %r&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">解析：格式化的逆过程</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">STR_TO_DATE</span><span class="p">(</span><span class="s1">&#39;2021-October-25th 11:37:30 Monday 1&#39;</span><span class="p">,</span><span class="s1">&#39;%Y-%M-%D %h:%i:%S %W %w&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">GET_FORMAT</span><span class="p">(</span><span class="nb">DATE</span><span class="p">,</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">(),</span><span class="n">GET_FORMAT</span><span class="p">(</span><span class="nb">DATE</span><span class="p">,</span><span class="s1">&#39;USA&#39;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">流程控制函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">IF</span><span class="p">(</span><span class="n">VALUE</span><span class="p">,</span><span class="n">VALUE1</span><span class="p">,</span><span class="n">VALUE2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="k">IF</span><span class="p">(</span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">6000</span><span class="p">,</span><span class="s1">&#39;高工资&#39;</span><span class="p">,</span><span class="s1">&#39;低工资&#39;</span><span class="p">)</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">commission_pct</span><span class="p">,</span><span class="k">IF</span><span class="p">(</span><span class="n">commission_pct</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">IF</span><span class="p">(</span><span class="n">commission_pct</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="s2">&#34;annual_sal&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">IFNULL</span><span class="p">(</span><span class="n">VALUE1</span><span class="p">,</span><span class="n">VALUE2</span><span class="p">):</span><span class="err">看做是</span><span class="k">IF</span><span class="p">(</span><span class="n">VALUE</span><span class="p">,</span><span class="n">VALUE1</span><span class="p">,</span><span class="n">VALUE2</span><span class="p">)</span><span class="err">的特殊情况</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">commission_pct</span><span class="p">,</span><span class="n">IFNULL</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="p">...</span><span class="k">WHEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">END</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">类似于</span><span class="n">java</span><span class="err">的</span><span class="k">if</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">else</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">15000</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">&#39;白骨精&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			     </span><span class="k">WHEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">&#39;潜力股&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			     </span><span class="k">WHEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">&#39;小屌丝&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			     </span><span class="k">ELSE</span><span class="w"> </span><span class="s1">&#39;草根&#39;</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="p">,</span><span class="n">department_id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">last_name</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">15000</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">&#39;白骨精&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			     </span><span class="k">WHEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10000</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">&#39;潜力股&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			     </span><span class="k">WHEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">8000</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">&#39;小屌丝&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			     </span><span class="k">END</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">END</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">类似于</span><span class="n">java</span><span class="err">的</span><span class="n">swich</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">case</span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">练习1
</span></span></span><span class="line"><span class="cl"><span class="cm">查询部门号为 10,20, 30 的员工信息,
</span></span></span><span class="line"><span class="cl"><span class="cm">若部门号为 10, 则打印其工资的 1.1 倍,
</span></span></span><span class="line"><span class="cl"><span class="cm">20 号部门, 则打印其工资的 1.2 倍,
</span></span></span><span class="line"><span class="cl"><span class="cm">30 号部门,打印其工资的 1.3 倍数,
</span></span></span><span class="line"><span class="cl"><span class="cm">其他部门,打印其工资的 1.4 倍数
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_id</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="k">CASE</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">								     </span><span class="k">WHEN</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">								     </span><span class="k">WHEN</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">								     </span><span class="k">ELSE</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">4</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">练习2
</span></span></span><span class="line"><span class="cl"><span class="cm">查询部门号为 10,20, 30 的员工信息,
</span></span></span><span class="line"><span class="cl"><span class="cm">若部门号为 10, 则打印其工资的 1.1 倍,
</span></span></span><span class="line"><span class="cl"><span class="cm">20 号部门, 则打印其工资的 1.2 倍,
</span></span></span><span class="line"><span class="cl"><span class="cm">30 号部门打印其工资的 1.3 倍数
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">employee_id</span><span class="p">,</span><span class="n">last_name</span><span class="p">,</span><span class="n">department_id</span><span class="p">,</span><span class="n">salary</span><span class="p">,</span><span class="k">CASE</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">								     </span><span class="k">WHEN</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">								     </span><span class="k">WHEN</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">								     </span><span class="k">END</span><span class="w"> </span><span class="s2">&#34;details&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">employees</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">department_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">加密与解密的函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">PASSWORD</span><span class="p">()</span><span class="err">在</span><span class="n">mysql8</span><span class="p">.</span><span class="mi">0</span><span class="err">中弃用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">),</span><span class="n">SHA</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">),</span><span class="n">MD5</span><span class="p">(</span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">ENCODE</span><span class="p">()</span><span class="err">\</span><span class="n">DECODE</span><span class="p">()</span><span class="w"> </span><span class="err">在</span><span class="n">mysql8</span><span class="p">.</span><span class="mi">0</span><span class="err">中弃用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">SELECT ENCODE(&#39;atguigu&#39;,&#39;mysql&#39;),DECODE(ENCODE(&#39;atguigu&#39;,&#39;mysql&#39;),&#39;mysql&#39;)
</span></span></span><span class="line"><span class="cl"><span class="cm">FROM DUAL;
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">MySQL</span><span class="err">信息函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">VERSION</span><span class="p">(),</span><span class="n">CONNECTION_ID</span><span class="p">(),</span><span class="k">DATABASE</span><span class="p">(),</span><span class="k">SCHEMA</span><span class="p">(),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">USER</span><span class="p">(),</span><span class="k">CURRENT_USER</span><span class="p">(),</span><span class="n">CHARSET</span><span class="p">(</span><span class="s1">&#39;尚硅谷&#39;</span><span class="p">),</span><span class="k">COLLATION</span><span class="p">(</span><span class="s1">&#39;尚硅谷&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">其他函数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">如果</span><span class="n">n</span><span class="err">的值小于或者等于</span><span class="mi">0</span><span class="err">，则只保留整数部分</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">FORMAT</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">125</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">FORMAT</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">125</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">FORMAT</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">125</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CONV</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w"> </span><span class="n">CONV</span><span class="p">(</span><span class="mi">8888</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span><span class="w"> </span><span class="n">CONV</span><span class="p">(</span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">以“</span><span class="mi">192</span><span class="p">.</span><span class="mi">168</span><span class="p">.</span><span class="mi">1</span><span class="p">.</span><span class="mi">100</span><span class="err">”为例，计算方式为</span><span class="mi">192</span><span class="err">乘以</span><span class="mi">256</span><span class="err">的</span><span class="mi">3</span><span class="err">次方，加上</span><span class="mi">168</span><span class="err">乘以</span><span class="mi">256</span><span class="err">的</span><span class="mi">2</span><span class="err">次方，加上</span><span class="mi">1</span><span class="err">乘以</span><span class="mi">256</span><span class="err">，再加上</span><span class="mi">100</span><span class="err">。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">INET_ATON</span><span class="p">(</span><span class="s1">&#39;192.168.1.100&#39;</span><span class="p">),</span><span class="n">INET_NTOA</span><span class="p">(</span><span class="mi">3232235876</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="n">BENCHMARK</span><span class="p">()</span><span class="err">用于测试表达式的执行效率</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">BENCHMARK</span><span class="p">(</span><span class="mi">100000</span><span class="p">,</span><span class="n">MD5</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="k">CONVERT</span><span class="p">():</span><span class="err">可以实现字符集的转换</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CHARSET</span><span class="p">(</span><span class="s1">&#39;atguigu&#39;</span><span class="p">),</span><span class="n">CHARSET</span><span class="p">(</span><span class="k">CONVERT</span><span class="p">(</span><span class="s1">&#39;atguigu&#39;</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="s1">&#39;gbk&#39;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"></code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/database/">database</a>
                </span><span><a href="/tags/mysql/">mysql</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>更新于 2022-06-17</span>
            </div><div class="post-info-mod"></div>
        </div></div><div class="post-nav"><a href="/posts/database%E6%9C%AA%E5%A4%84%E7%90%86/mysql/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B07-8%E7%AB%A0/" class="prev" rel="prev" title="mysql详细笔记7-8章"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/posts/database%E6%9C%AA%E5%A4%84%E7%90%86/mysql/mysql%E8%AF%A6%E7%BB%86%E7%AC%94%E8%AE%B03-4%E7%AB%A0/" class="next" rel="next" title="mysql详细笔记3-4章">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.112.4">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/"></a></span></div>
</div>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script src="/lib/autocomplete/autocomplete.min.js"></script><script src="/lib/lunr/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.zh.min.js"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script src="/js/theme.min.js"></script></body></html>
